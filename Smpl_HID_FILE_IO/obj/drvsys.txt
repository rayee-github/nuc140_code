; generated by ARM C/C++ Compiler, 4.1 [Build 481]
; commandline ArmCC [--split_sections --debug -c --asm --interleave -o.\obj\drvsys.o --depend=.\obj\drvsys.d --feedback=.\obj\Smpl_HID_FILE_IO.fed --cpu=Cortex-M0 --apcs=interwork -O0 -I.\ -I..\..\..\..\CMSIS\CM0\CoreSupport -I..\..\..\..\CMSIS\CM0\DeviceSupport\Nuvoton\NUC1xx -I..\..\..\Include -I..\..\..\Include\Driver -I..\..\..\Include\NUC1xx-LB_002 -IC:\Keil\ARM\INC -IC:\Keil\ARM\INC\ST\STM32F10x --omf_browse=.\obj\drvsys.crf ..\..\..\Src\Driver\DrvSYS.c]
                          THUMB

                          AREA ||i.BOD_IRQHandler||, CODE, READONLY, ALIGN=2

                  BOD_IRQHandler PROC
;;;511    /*---------------------------------------------------------------------------------------------------------*/
;;;512    void BOD_IRQHandler(void)
000000  b510              PUSH     {r4,lr}
;;;513    {
;;;514        SYS->BODCR.BOD_INTF = 1;
000002  2005              MOVS     r0,#5
000004  0700              LSLS     r0,r0,#28
000006  6980              LDR      r0,[r0,#0x18]
000008  2110              MOVS     r1,#0x10
00000a  4388              BICS     r0,r0,r1
00000c  3010              ADDS     r0,r0,#0x10
00000e  2105              MOVS     r1,#5
000010  0709              LSLS     r1,r1,#28
000012  6188              STR      r0,[r1,#0x18]
;;;515        if (BOD_callbackFn != NULL)
000014  4803              LDR      r0,|L1.36|
000016  6800              LDR      r0,[r0,#0]  ; BOD_callbackFn
000018  2800              CMP      r0,#0
00001a  d002              BEQ      |L1.34|
;;;516            BOD_callbackFn();
00001c  4801              LDR      r0,|L1.36|
00001e  6800              LDR      r0,[r0,#0]  ; BOD_callbackFn
000020  4780              BLX      r0
                  |L1.34|
;;;517    }
000022  bd10              POP      {r4,pc}
;;;518    
                          ENDP

                  |L1.36|
                          DCD      BOD_callbackFn

                          AREA ||i.DrvSYS_ClearClockSwitchStatus||, CODE, READONLY, ALIGN=2

                  DrvSYS_ClearClockSwitchStatus PROC
;;;1403   /*---------------------------------------------------------------------------------------------------------*/
;;;1404   void DrvSYS_ClearClockSwitchStatus(void)
000000  4803              LDR      r0,|L2.16|
;;;1405   {
;;;1406        SYSCLK->CLKSTATUS.CLK_SW_FAIL = 1;
000002  68c0              LDR      r0,[r0,#0xc]
000004  2180              MOVS     r1,#0x80
000006  4388              BICS     r0,r0,r1
000008  3080              ADDS     r0,r0,#0x80
00000a  4901              LDR      r1,|L2.16|
00000c  60c8              STR      r0,[r1,#0xc]
;;;1407   }
00000e  4770              BX       lr
;;;1408   
                          ENDP

                  |L2.16|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_ClearResetSource||, CODE, READONLY, ALIGN=1

                  DrvSYS_ClearResetSource PROC
;;;145    /*---------------------------------------------------------------------------------------------------------*/
;;;146    uint32_t DrvSYS_ClearResetSource(uint32_t u32Src)
000000  4601              MOV      r1,r0
;;;147    {
;;;148        *((__IO uint32_t *) &SYS->RSTSRC) = u32Src;
000002  2005              MOVS     r0,#5
000004  0700              LSLS     r0,r0,#28
000006  6041              STR      r1,[r0,#4]
;;;149        return 0;
000008  2000              MOVS     r0,#0
;;;150    }
00000a  4770              BX       lr
;;;151    
                          ENDP


                          AREA ||i.DrvSYS_Delay||, CODE, READONLY, ALIGN=2

                  DrvSYS_Delay PROC
;;;1309   /*---------------------------------------------------------------------------------------------------------*/
;;;1310   void DrvSYS_Delay(uint32_t us)
000000  4908              LDR      r1,|L4.36|
;;;1311   {
;;;1312       SysTick->LOAD = us * CyclesPerUs;
000002  6809              LDR      r1,[r1,#0]  ; CyclesPerUs
000004  4341              MULS     r1,r0,r1
000006  4a08              LDR      r2,|L4.40|
000008  6151              STR      r1,[r2,#0x14]
;;;1313       SysTick->VAL  = (0x00);
00000a  2100              MOVS     r1,#0
00000c  6191              STR      r1,[r2,#0x18]
;;;1314       SysTick->CTRL = SysTick_CTRL_CLKSOURCE_Msk | SysTick_CTRL_ENABLE_Msk;
00000e  2105              MOVS     r1,#5
000010  6111              STR      r1,[r2,#0x10]
;;;1315   
;;;1316       /* Waiting for down-count to zero */
;;;1317       while((SysTick->CTRL & (1 << 16)) == 0);
000012  bf00              NOP      
                  |L4.20|
000014  4904              LDR      r1,|L4.40|
000016  6909              LDR      r1,[r1,#0x10]
000018  2201              MOVS     r2,#1
00001a  0412              LSLS     r2,r2,#16
00001c  4211              TST      r1,r2
00001e  d0f9              BEQ      |L4.20|
;;;1318   }
000020  4770              BX       lr
;;;1319   
                          ENDP

000022  0000              DCW      0x0000
                  |L4.36|
                          DCD      CyclesPerUs
                  |L4.40|
                          DCD      0xe000e000

                          AREA ||i.DrvSYS_DisableBODLowPowerMode||, CODE, READONLY, ALIGN=1

                  DrvSYS_DisableBODLowPowerMode PROC
;;;349    /*---------------------------------------------------------------------------------------------------------*/
;;;350    void DrvSYS_DisableBODLowPowerMode(void)
000000  2005              MOVS     r0,#5
;;;351    {
;;;352        SYS->BODCR.BOD_LPM = 0;
000002  0700              LSLS     r0,r0,#28
000004  6980              LDR      r0,[r0,#0x18]
000006  2120              MOVS     r1,#0x20
000008  4388              BICS     r0,r0,r1
00000a  2105              MOVS     r1,#5
00000c  0709              LSLS     r1,r1,#28
00000e  6188              STR      r0,[r1,#0x18]
;;;353    }
000010  4770              BX       lr
;;;354    
                          ENDP


                          AREA ||i.DrvSYS_DisableHighPerformanceMode||, CODE, READONLY, ALIGN=1

                  DrvSYS_DisableHighPerformanceMode PROC
;;;1291   /*---------------------------------------------------------------------------------------------------------*/
;;;1292   void DrvSYS_DisableHighPerformanceMode(void)
000000  2005              MOVS     r0,#5
;;;1293   {   
;;;1294       SYS->CPR.HPE = 0;
000002  0700              LSLS     r0,r0,#28
000004  6900              LDR      r0,[r0,#0x10]
000006  0840              LSRS     r0,r0,#1
000008  0040              LSLS     r0,r0,#1
00000a  2105              MOVS     r1,#5
00000c  0709              LSLS     r1,r1,#28
00000e  6108              STR      r0,[r1,#0x10]
;;;1295   }
000010  4770              BX       lr
;;;1296   
                          ENDP


                          AREA ||i.DrvSYS_DisableLowVoltReset||, CODE, READONLY, ALIGN=1

                  DrvSYS_DisableLowVoltReset PROC
;;;413    /*---------------------------------------------------------------------------------------------------------*/
;;;414    void DrvSYS_DisableLowVoltReset(void)
000000  2005              MOVS     r0,#5
;;;415    {
;;;416        SYS->BODCR.LVR_EN = 0;
000002  0700              LSLS     r0,r0,#28
000004  6980              LDR      r0,[r0,#0x18]
000006  2180              MOVS     r1,#0x80
000008  4388              BICS     r0,r0,r1
00000a  2105              MOVS     r1,#5
00000c  0709              LSLS     r1,r1,#28
00000e  6188              STR      r0,[r1,#0x18]
;;;417    }
000010  4770              BX       lr
;;;418    
                          ENDP


                          AREA ||i.DrvSYS_DisablePOR||, CODE, READONLY, ALIGN=2

                  DrvSYS_DisablePOR PROC
;;;493    /*---------------------------------------------------------------------------------------------------------*/
;;;494    void DrvSYS_DisablePOR(void)
000000  4801              LDR      r0,|L8.8|
;;;495    {
;;;496        SYS->PORCR = 0x5AA5;
000002  0701              LSLS     r1,r0,#28
000004  6248              STR      r0,[r1,#0x24]
;;;497    }
000006  4770              BX       lr
;;;498    
                          ENDP

                  |L8.8|
                          DCD      0x00005aa5

                          AREA ||i.DrvSYS_DisableTemperatureSensor||, CODE, READONLY, ALIGN=1

                  DrvSYS_DisableTemperatureSensor PROC
;;;447    /*---------------------------------------------------------------------------------------------------------*/
;;;448    void DrvSYS_DisableTemperatureSensor(void)
000000  2005              MOVS     r0,#5
;;;449    {
;;;450        SYS->TEMPCR.VTEMP_EN = 0;
000002  0700              LSLS     r0,r0,#28
000004  69c0              LDR      r0,[r0,#0x1c]
000006  0840              LSRS     r0,r0,#1
000008  0040              LSLS     r0,r0,#1
00000a  2105              MOVS     r1,#5
00000c  0709              LSLS     r1,r1,#28
00000e  61c8              STR      r0,[r1,#0x1c]
;;;451    }
000010  4770              BX       lr
;;;452    
                          ENDP


                          AREA ||i.DrvSYS_EnableBODLowPowerMode||, CODE, READONLY, ALIGN=1

                  DrvSYS_EnableBODLowPowerMode PROC
;;;326    /*---------------------------------------------------------------------------------------------------------*/
;;;327    void DrvSYS_EnableBODLowPowerMode(void)
000000  2005              MOVS     r0,#5
;;;328    {
;;;329        SYS->BODCR.BOD_LPM = 1;
000002  0700              LSLS     r0,r0,#28
000004  6980              LDR      r0,[r0,#0x18]
000006  2120              MOVS     r1,#0x20
000008  4388              BICS     r0,r0,r1
00000a  3020              ADDS     r0,r0,#0x20
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  6188              STR      r0,[r1,#0x18]
;;;330    }
000012  4770              BX       lr
;;;331    
                          ENDP


                          AREA ||i.DrvSYS_EnableHighPerformanceMode||, CODE, READONLY, ALIGN=1

                  DrvSYS_EnableHighPerformanceMode PROC
;;;1266   /*---------------------------------------------------------------------------------------------------------*/
;;;1267   void DrvSYS_EnableHighPerformanceMode(void)
000000  2005              MOVS     r0,#5
;;;1268   {   
;;;1269       SYS->CPR.HPE = 1;
000002  0700              LSLS     r0,r0,#28
000004  6900              LDR      r0,[r0,#0x10]
000006  0840              LSRS     r0,r0,#1
000008  0040              LSLS     r0,r0,#1
00000a  1c40              ADDS     r0,r0,#1
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  6108              STR      r0,[r1,#0x10]
;;;1270   }
000012  4770              BX       lr
;;;1271   
                          ENDP


                          AREA ||i.DrvSYS_EnableLowVoltReset||, CODE, READONLY, ALIGN=1

                  DrvSYS_EnableLowVoltReset PROC
;;;390    /*---------------------------------------------------------------------------------------------------------*/
;;;391    void DrvSYS_EnableLowVoltReset(void)
000000  2005              MOVS     r0,#5
;;;392    {
;;;393        SYS->BODCR.LVR_EN = 1;
000002  0700              LSLS     r0,r0,#28
000004  6980              LDR      r0,[r0,#0x18]
000006  2180              MOVS     r1,#0x80
000008  4388              BICS     r0,r0,r1
00000a  3080              ADDS     r0,r0,#0x80
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  6188              STR      r0,[r1,#0x18]
;;;394    }
000012  4770              BX       lr
;;;395    
                          ENDP


                          AREA ||i.DrvSYS_EnablePOR||, CODE, READONLY, ALIGN=1

                  DrvSYS_EnablePOR PROC
;;;470    /*---------------------------------------------------------------------------------------------------------*/
;;;471    void DrvSYS_EnablePOR(void)
000000  2000              MOVS     r0,#0
;;;472    {
;;;473        SYS->PORCR = 0;
000002  2105              MOVS     r1,#5
000004  0709              LSLS     r1,r1,#28
000006  6248              STR      r0,[r1,#0x24]
;;;474    }
000008  4770              BX       lr
;;;475    
                          ENDP


                          AREA ||i.DrvSYS_EnableTemperatureSensor||, CODE, READONLY, ALIGN=1

                  DrvSYS_EnableTemperatureSensor PROC
;;;430    /*---------------------------------------------------------------------------------------------------------*/
;;;431    void DrvSYS_EnableTemperatureSensor(void)
000000  2005              MOVS     r0,#5
;;;432    {
;;;433        SYS->TEMPCR.VTEMP_EN = 1;
000002  0700              LSLS     r0,r0,#28
000004  69c0              LDR      r0,[r0,#0x1c]
000006  0840              LSRS     r0,r0,#1
000008  0040              LSLS     r0,r0,#1
00000a  1c40              ADDS     r0,r0,#1
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  61c8              STR      r0,[r1,#0x1c]
;;;434    }
000012  4770              BX       lr
;;;435    
                          ENDP


                          AREA ||i.DrvSYS_EnterPowerDown||, CODE, READONLY, ALIGN=2

                  DrvSYS_EnterPowerDown PROC
;;;912    /*---------------------------------------------------------------------------------------------------------*/
;;;913    void DrvSYS_EnterPowerDown(E_SYS_PD_TYPE ePDType)
000000  490c              LDR      r1,|L15.52|
;;;914    {   
;;;915        SYSCLK->PWRCON.PWR_DOWN_EN = 0;
000002  6809              LDR      r1,[r1,#0]
000004  2280              MOVS     r2,#0x80
000006  4391              BICS     r1,r1,r2
000008  4a0a              LDR      r2,|L15.52|
00000a  6011              STR      r1,[r2,#0]
;;;916        SYSCLK->PWRCON.PD_WAIT_CPU = ePDType;
00000c  4611              MOV      r1,r2
00000e  6809              LDR      r1,[r1,#0]
000010  22ff              MOVS     r2,#0xff
000012  3201              ADDS     r2,#1
000014  4391              BICS     r1,r1,r2
000016  0202              LSLS     r2,r0,#8
000018  23ff              MOVS     r3,#0xff
00001a  3301              ADDS     r3,#1
00001c  401a              ANDS     r2,r2,r3
00001e  4311              ORRS     r1,r1,r2
000020  4a04              LDR      r2,|L15.52|
000022  6011              STR      r1,[r2,#0]
;;;917        SYSCLK->PWRCON.PWR_DOWN_EN = 1;
000024  4611              MOV      r1,r2
000026  6809              LDR      r1,[r1,#0]
000028  2280              MOVS     r2,#0x80
00002a  4391              BICS     r1,r1,r2
00002c  3180              ADDS     r1,r1,#0x80
00002e  4a01              LDR      r2,|L15.52|
000030  6011              STR      r1,[r2,#0]
;;;918    }
000032  4770              BX       lr
;;;919    
                          ENDP

                  |L15.52|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_GetBODState||, CODE, READONLY, ALIGN=1

                  DrvSYS_GetBODState PROC
;;;367    /*---------------------------------------------------------------------------------------------------------*/
;;;368    uint32_t DrvSYS_GetBODState(void)
000000  2005              MOVS     r0,#5
;;;369    {
;;;370        return SYS->BODCR.BOD_OUT;
000002  0700              LSLS     r0,r0,#28
000004  6980              LDR      r0,[r0,#0x18]
000006  0640              LSLS     r0,r0,#25
000008  0fc0              LSRS     r0,r0,#31
;;;371    }
00000a  4770              BX       lr
;;;372    
                          ENDP


                          AREA ||i.DrvSYS_GetChipClockSourceStatus||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetChipClockSourceStatus PROC
;;;1337   /*---------------------------------------------------------------------------------------------------------*/
;;;1338   int32_t DrvSYS_GetChipClockSourceStatus(E_SYS_CHIP_CLKSRC eClkSrc)
000000  b500              PUSH     {lr}
;;;1339   {
000002  4602              MOV      r2,r0
;;;1340       int32_t status;
;;;1341   
;;;1342       switch(eClkSrc)
000004  4613              MOV      r3,r2
000006  f7fffffe          BL       __ARM_common_switch8
00000a  0504              DCB      0x05,0x04
00000c  090e1318          DCB      0x09,0x0e,0x13,0x18
000010  1d00              DCB      0x1d,0x00
;;;1343       {
;;;1344           case E_SYS_XTL12M:  
;;;1345               status = SYSCLK->CLKSTATUS.XTL12M_STB;
000012  480f              LDR      r0,|L17.80|
000014  68c0              LDR      r0,[r0,#0xc]
000016  07c1              LSLS     r1,r0,#31
000018  0fc9              LSRS     r1,r1,#31
;;;1346               break;
00001a  e015              B        |L17.72|
;;;1347           case E_SYS_XTL32K:
;;;1348               status = SYSCLK->CLKSTATUS.XTL32K_STB;
00001c  480c              LDR      r0,|L17.80|
00001e  68c0              LDR      r0,[r0,#0xc]
000020  0780              LSLS     r0,r0,#30
000022  0fc1              LSRS     r1,r0,#31
;;;1349               break;
000024  e010              B        |L17.72|
;;;1350           case E_SYS_OSC22M:
;;;1351               status = SYSCLK->CLKSTATUS.OSC22M_STB;
000026  480a              LDR      r0,|L17.80|
000028  68c0              LDR      r0,[r0,#0xc]
00002a  06c0              LSLS     r0,r0,#27
00002c  0fc1              LSRS     r1,r0,#31
;;;1352               break;
00002e  e00b              B        |L17.72|
;;;1353           case E_SYS_OSC10K:
;;;1354               status = SYSCLK->CLKSTATUS.OSC10K_STB;
000030  4807              LDR      r0,|L17.80|
000032  68c0              LDR      r0,[r0,#0xc]
000034  0700              LSLS     r0,r0,#28
000036  0fc1              LSRS     r1,r0,#31
;;;1355               break;
000038  e006              B        |L17.72|
;;;1356           case E_SYS_PLL:
;;;1357               status = SYSCLK->CLKSTATUS.PLL_STB;
00003a  4805              LDR      r0,|L17.80|
00003c  68c0              LDR      r0,[r0,#0xc]
00003e  0740              LSLS     r0,r0,#29
000040  0fc1              LSRS     r1,r0,#31
;;;1358               break;
000042  e001              B        |L17.72|
;;;1359           default:
;;;1360               return E_DRVSYS_ERR_ARGUMENT;
000044  4803              LDR      r0,|L17.84|
                  |L17.70|
;;;1361       }
;;;1362   
;;;1363       return status;
;;;1364   }
000046  bd00              POP      {pc}
                  |L17.72|
000048  bf00              NOP                            ;1346
00004a  4608              MOV      r0,r1                 ;1363
00004c  e7fb              B        |L17.70|
;;;1365   
                          ENDP

00004e  0000              DCW      0x0000
                  |L17.80|
                          DCD      0x50000200
                  |L17.84|
                          DCD      0xffff9603

                          AREA ||i.DrvSYS_GetClockSwitchStatus||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetClockSwitchStatus PROC
;;;1383   /*---------------------------------------------------------------------------------------------------------*/
;;;1384   uint32_t DrvSYS_GetClockSwitchStatus(void)
000000  4802              LDR      r0,|L18.12|
;;;1385   {   
;;;1386       return SYSCLK->CLKSTATUS.CLK_SW_FAIL;
000002  68c0              LDR      r0,[r0,#0xc]
000004  0600              LSLS     r0,r0,#24
000006  0fc0              LSRS     r0,r0,#31
;;;1387   }
000008  4770              BX       lr
;;;1388   
                          ENDP

00000a  0000              DCW      0x0000
                  |L18.12|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_GetExtClockFreq||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetExtClockFreq PROC
;;;968    /*---------------------------------------------------------------------------------------------------------*/
;;;969    uint32_t DrvSYS_GetExtClockFreq(void)
000000  4800              LDR      r0,|L19.4|
;;;970    {   
;;;971        return __XTAL;
;;;972    }
000002  4770              BX       lr
;;;973    
                          ENDP

                  |L19.4|
                          DCD      0x00b71b00

                          AREA ||i.DrvSYS_GetHCLKFreq||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetHCLKFreq PROC
;;;1111   /*---------------------------------------------------------------------------------------------------------*/
;;;1112   uint32_t DrvSYS_GetHCLKFreq(void)
000000  b570              PUSH     {r4-r6,lr}
;;;1113   {
;;;1114       
;;;1115       uint32_t u32Freqout = 0, u32AHBDivider;
000002  2500              MOVS     r5,#0
;;;1116   
;;;1117       if (SYSCLK->CLKSEL0.HCLK_S == 0)        /* external 12MHz crystal clock */
000004  4815              LDR      r0,|L20.92|
000006  6900              LDR      r0,[r0,#0x10]
000008  0740              LSLS     r0,r0,#29
00000a  0f40              LSRS     r0,r0,#29
00000c  d101              BNE      |L20.18|
;;;1118       {
;;;1119           u32Freqout = __XTAL;    
00000e  4d14              LDR      r5,|L20.96|
000010  e01a              B        |L20.72|
                  |L20.18|
;;;1120       }
;;;1121       else if(SYSCLK->CLKSEL0.HCLK_S == 1)    /* external 32KHz crystal clock */ 
000012  4812              LDR      r0,|L20.92|
000014  6900              LDR      r0,[r0,#0x10]
000016  0740              LSLS     r0,r0,#29
000018  0f40              LSRS     r0,r0,#29
00001a  2801              CMP      r0,#1
00001c  d101              BNE      |L20.34|
;;;1122       {
;;;1123           u32Freqout = __RTC_XTAL;
00001e  03c5              LSLS     r5,r0,#15
000020  e012              B        |L20.72|
                  |L20.34|
;;;1124       }
;;;1125       else if(SYSCLK->CLKSEL0.HCLK_S == 2)    /* PLL clock */
000022  480e              LDR      r0,|L20.92|
000024  6900              LDR      r0,[r0,#0x10]
000026  0740              LSLS     r0,r0,#29
000028  0f40              LSRS     r0,r0,#29
00002a  2802              CMP      r0,#2
00002c  d103              BNE      |L20.54|
;;;1126       {
;;;1127           u32Freqout = DrvSYS_GetPLLClockFreq();
00002e  f7fffffe          BL       DrvSYS_GetPLLClockFreq
000032  4605              MOV      r5,r0
000034  e008              B        |L20.72|
                  |L20.54|
;;;1128       }
;;;1129       else if(SYSCLK->CLKSEL0.HCLK_S == 3)    /* internal 10KHz oscillator clock */
000036  4809              LDR      r0,|L20.92|
000038  6900              LDR      r0,[r0,#0x10]
00003a  0740              LSLS     r0,r0,#29
00003c  0f40              LSRS     r0,r0,#29
00003e  2803              CMP      r0,#3
000040  d101              BNE      |L20.70|
;;;1130       {
;;;1131           u32Freqout = __IRC10K;
000042  4d08              LDR      r5,|L20.100|
000044  e000              B        |L20.72|
                  |L20.70|
;;;1132       }
;;;1133       else                                    /* internal 22MHz oscillator clock */
;;;1134       {
;;;1135           u32Freqout = __IRC22M;
000046  4d08              LDR      r5,|L20.104|
                  |L20.72|
;;;1136       
;;;1137       }
;;;1138       u32AHBDivider = SYSCLK->CLKDIV.HCLK_N + 1 ;
000048  4804              LDR      r0,|L20.92|
00004a  6980              LDR      r0,[r0,#0x18]
00004c  0700              LSLS     r0,r0,#28
00004e  0f00              LSRS     r0,r0,#28
000050  1c44              ADDS     r4,r0,#1
;;;1139       
;;;1140       return (u32Freqout/u32AHBDivider);  
000052  4621              MOV      r1,r4
000054  4628              MOV      r0,r5
000056  f7fffffe          BL       __aeabi_uidivmod
;;;1141   }
00005a  bd70              POP      {r4-r6,pc}
;;;1142   
                          ENDP

                  |L20.92|
                          DCD      0x50000200
                  |L20.96|
                          DCD      0x00b71b00
                  |L20.100|
                          DCD      0x00002710
                  |L20.104|
                          DCD      0x01518000

                          AREA ||i.DrvSYS_GetPLLClockFreq||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetPLLClockFreq PROC
;;;1077   /*---------------------------------------------------------------------------------------------------------*/
;;;1078   uint32_t DrvSYS_GetPLLClockFreq(void)
000000  b57f              PUSH     {r0-r6,lr}
;;;1079   {
;;;1080       uint32_t u32Freq =0, u32PLLSrc;
000002  2500              MOVS     r5,#0
;;;1081       uint32_t au32Map[4] = {1, 2, 2, 4};
000004  4b18              LDR      r3,|L21.104|
000006  cb0f              LDM      r3,{r0-r3}
000008  466c              MOV      r4,sp
00000a  c40f              STM      r4!,{r0-r3}
;;;1082   
;;;1083       if (SYSCLK->PLLCON.PLL_SRC == 1)
00000c  4817              LDR      r0,|L21.108|
00000e  6a00              LDR      r0,[r0,#0x20]
000010  0300              LSLS     r0,r0,#12
000012  0fc0              LSRS     r0,r0,#31
000014  2801              CMP      r0,#1
000016  d101              BNE      |L21.28|
;;;1084       {
;;;1085           u32PLLSrc = __IRC22M;   
000018  4c15              LDR      r4,|L21.112|
00001a  e000              B        |L21.30|
                  |L21.28|
;;;1086       }
;;;1087       else
;;;1088       {
;;;1089           u32PLLSrc = __XTAL;
00001c  4c15              LDR      r4,|L21.116|
                  |L21.30|
;;;1090       }
;;;1091   
;;;1092       if (SYSCLK->PLLCON.PD ==1)  
00001e  4813              LDR      r0,|L21.108|
000020  6a00              LDR      r0,[r0,#0x20]
000022  03c0              LSLS     r0,r0,#15
000024  0fc0              LSRS     r0,r0,#31
000026  2801              CMP      r0,#1
000028  d101              BNE      |L21.46|
;;;1093           u32Freq = 0;    
00002a  2500              MOVS     r5,#0
00002c  e019              B        |L21.98|
                  |L21.46|
;;;1094       else        
;;;1095           u32Freq = u32PLLSrc * (SYSCLK->PLLCON.FB_DV+2) / (SYSCLK->PLLCON.IN_DV+2) / au32Map[SYSCLK->PLLCON.OUT_DV];
00002e  4a0f              LDR      r2,|L21.108|
000030  6a12              LDR      r2,[r2,#0x20]
000032  0492              LSLS     r2,r2,#18
000034  0ed2              LSRS     r2,r2,#27
000036  1c91              ADDS     r1,r2,#2
000038  4a0c              LDR      r2,|L21.108|
00003a  6a12              LDR      r2,[r2,#0x20]
00003c  05d2              LSLS     r2,r2,#23
00003e  0dd2              LSRS     r2,r2,#23
000040  1c92              ADDS     r2,r2,#2
000042  4362              MULS     r2,r4,r2
000044  4610              MOV      r0,r2
000046  f7fffffe          BL       __aeabi_uidivmod
00004a  4606              MOV      r6,r0
00004c  4807              LDR      r0,|L21.108|
00004e  6a00              LDR      r0,[r0,#0x20]
000050  0400              LSLS     r0,r0,#16
000052  0f80              LSRS     r0,r0,#30
000054  0080              LSLS     r0,r0,#2
000056  466a              MOV      r2,sp
000058  5811              LDR      r1,[r2,r0]
00005a  4630              MOV      r0,r6
00005c  f7fffffe          BL       __aeabi_uidivmod
000060  4605              MOV      r5,r0
                  |L21.98|
;;;1096   
;;;1097       return u32Freq;
000062  4628              MOV      r0,r5
;;;1098   }
000064  b004              ADD      sp,sp,#0x10
000066  bd70              POP      {r4-r6,pc}
;;;1099   
                          ENDP

                  |L21.104|
                          DCD      ||.constdata||
                  |L21.108|
                          DCD      0x50000200
                  |L21.112|
                          DCD      0x01518000
                  |L21.116|
                          DCD      0x00b71b00

                          AREA ||i.DrvSYS_GetPLLContent||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetPLLContent PROC
;;;990    /*---------------------------------------------------------------------------------------------------------*/
;;;991    uint32_t DrvSYS_GetPLLContent(E_SYS_PLL_CLKSRC ePllSrc, uint32_t u32PllClk)
000000  b5f3              PUSH     {r0,r1,r4-r7,lr}
;;;992    {
000002  b083              SUB      sp,sp,#0xc
000004  460c              MOV      r4,r1
;;;993        uint32_t u32NR, u32NF, u32NO;
;;;994        
;;;995        uint32_t u32PllSrcClk = __XTAL, u32Register=0;
000006  4827              LDR      r0,|L22.164|
000008  9002              STR      r0,[sp,#8]
00000a  2000              MOVS     r0,#0
00000c  9001              STR      r0,[sp,#4]
;;;996    
;;;997        if ( (u32PllClk <= FREQ_200MHZ) && (u32PllClk > FREQ_100MHZ) )
00000e  4826              LDR      r0,|L22.168|
000010  4284              CMP      r4,r0
000012  d804              BHI      |L22.30|
000014  1040              ASRS     r0,r0,#1
000016  4284              CMP      r4,r0
000018  d901              BLS      |L22.30|
;;;998        {
;;;999            u32NO = 0;
00001a  2700              MOVS     r7,#0
00001c  e014              B        |L22.72|
                  |L22.30|
;;;1000       }
;;;1001       else if ( (u32PllClk <= FREQ_100MHZ) && (u32PllClk > FREQ_50MHZ) )
00001e  4823              LDR      r0,|L22.172|
000020  4284              CMP      r4,r0
000022  d805              BHI      |L22.48|
000024  1040              ASRS     r0,r0,#1
000026  4284              CMP      r4,r0
000028  d902              BLS      |L22.48|
;;;1002       {
;;;1003           u32NO = 1;
00002a  2701              MOVS     r7,#1
;;;1004           u32PllClk = u32PllClk << 1;
00002c  0064              LSLS     r4,r4,#1
00002e  e00b              B        |L22.72|
                  |L22.48|
;;;1005       }
;;;1006       else if ( (u32PllClk <= FREQ_50MHZ) && (u32PllClk >= FREQ_25MHZ) )
000030  481f              LDR      r0,|L22.176|
000032  4284              CMP      r4,r0
000034  d805              BHI      |L22.66|
000036  1040              ASRS     r0,r0,#1
000038  4284              CMP      r4,r0
00003a  d302              BCC      |L22.66|
;;;1007       {
;;;1008           u32NO = 3;
00003c  2703              MOVS     r7,#3
;;;1009           u32PllClk = u32PllClk << 2;
00003e  00a4              LSLS     r4,r4,#2
000040  e002              B        |L22.72|
                  |L22.66|
;;;1010       }
;;;1011       else
;;;1012       {
;;;1013           return 0xC22E;  
000042  481c              LDR      r0,|L22.180|
                  |L22.68|
;;;1014       } 
;;;1015           
;;;1016       if (ePllSrc == E_SYS_EXTERNAL_12M)
;;;1017           u32PllSrcClk = __XTAL;
;;;1018       else if (ePllSrc == E_SYS_INTERNAL_22M)
;;;1019           u32PllSrcClk = __IRC22M; 
;;;1020   
;;;1021       u32NF = u32PllClk / 1000000;
;;;1022       u32NR = u32PllSrcClk / 1000000; 
;;;1023       
;;;1024       while(1)
;;;1025       {
;;;1026           if ( (u32NR & 0x01) || (u32NF & 0x01) || (u32NR == 2) || (u32NF == 2) )
;;;1027           {
;;;1028               break;
;;;1029           }
;;;1030           else
;;;1031           {
;;;1032               u32NR >>= 1;
;;;1033               u32NF >>= 1;
;;;1034           }   
;;;1035       }    
;;;1036           
;;;1037       u32Register = (u32NO<<14) | ((u32NR - 2)<<9) | (u32NF - 2);
;;;1038   
;;;1039       /* Return the nearest value */
;;;1040       return u32Register;
;;;1041   }
000044  b005              ADD      sp,sp,#0x14
000046  bdf0              POP      {r4-r7,pc}
                  |L22.72|
000048  9803              LDR      r0,[sp,#0xc]          ;1016
00004a  2800              CMP      r0,#0                 ;1016
00004c  d102              BNE      |L22.84|
00004e  4815              LDR      r0,|L22.164|
000050  9002              STR      r0,[sp,#8]            ;1017
000052  e004              B        |L22.94|
                  |L22.84|
000054  9803              LDR      r0,[sp,#0xc]          ;1018
000056  2801              CMP      r0,#1                 ;1018
000058  d101              BNE      |L22.94|
00005a  4817              LDR      r0,|L22.184|
00005c  9002              STR      r0,[sp,#8]            ;1019
                  |L22.94|
00005e  4917              LDR      r1,|L22.188|
000060  4620              MOV      r0,r4                 ;1021
000062  f7fffffe          BL       __aeabi_uidivmod
000066  4606              MOV      r6,r0                 ;1021
000068  4914              LDR      r1,|L22.188|
00006a  9802              LDR      r0,[sp,#8]            ;1022
00006c  f7fffffe          BL       __aeabi_uidivmod
000070  4605              MOV      r5,r0                 ;1022
000072  e00c              B        |L22.142|
                  |L22.116|
000074  07e8              LSLS     r0,r5,#31             ;1026
000076  0fc0              LSRS     r0,r0,#31             ;1026
000078  d106              BNE      |L22.136|
00007a  07f0              LSLS     r0,r6,#31             ;1026
00007c  0fc0              LSRS     r0,r0,#31             ;1026
00007e  d103              BNE      |L22.136|
000080  2d02              CMP      r5,#2                 ;1026
000082  d001              BEQ      |L22.136|
000084  2e02              CMP      r6,#2                 ;1026
000086  d100              BNE      |L22.138|
                  |L22.136|
000088  e002              B        |L22.144|
                  |L22.138|
00008a  086d              LSRS     r5,r5,#1              ;1032
00008c  0876              LSRS     r6,r6,#1              ;1033
                  |L22.142|
00008e  e7f1              B        |L22.116|
                  |L22.144|
000090  bf00              NOP                            ;1028
000092  03b8              LSLS     r0,r7,#14             ;1037
000094  1ea9              SUBS     r1,r5,#2              ;1037
000096  0249              LSLS     r1,r1,#9              ;1037
000098  4308              ORRS     r0,r0,r1              ;1037
00009a  1eb1              SUBS     r1,r6,#2              ;1037
00009c  4308              ORRS     r0,r0,r1              ;1037
00009e  9001              STR      r0,[sp,#4]            ;1037
0000a0  9801              LDR      r0,[sp,#4]            ;1040
0000a2  e7cf              B        |L22.68|
;;;1042   
                          ENDP

                  |L22.164|
                          DCD      0x00b71b00
                  |L22.168|
                          DCD      0x0bebc200
                  |L22.172|
                          DCD      0x05f5e100
                  |L22.176|
                          DCD      0x02faf080
                  |L22.180|
                          DCD      0x0000c22e
                  |L22.184|
                          DCD      0x01518000
                  |L22.188|
                          DCD      0x000f4240

                          AREA ||i.DrvSYS_GetResetSource||, CODE, READONLY, ALIGN=1

                  DrvSYS_GetResetSource PROC
;;;129    /*---------------------------------------------------------------------------------------------------------*/
;;;130    uint32_t DrvSYS_GetResetSource(void)
000000  2005              MOVS     r0,#5
;;;131    {
;;;132        return *((__IO uint32_t *) &SYS->RSTSRC);
000002  0700              LSLS     r0,r0,#28
000004  6840              LDR      r0,[r0,#4]
;;;133    }
000006  4770              BX       lr
;;;134    
                          ENDP


                          AREA ||i.DrvSYS_GetVersion||, CODE, READONLY, ALIGN=2

                  DrvSYS_GetVersion PROC
;;;32     /*---------------------------------------------------------------------------------------------------------*/
;;;33     uint32_t DrvSYS_GetVersion(void)
000000  4800              LDR      r0,|L24.4|
;;;34     {
;;;35         return DRVSYS_VERSION_NUM;
;;;36     }
000002  4770              BX       lr
;;;37     
                          ENDP

                  |L24.4|
                          DCD      0x00010203

                          AREA ||i.DrvSYS_IsProtectedRegLocked||, CODE, READONLY, ALIGN=2

                  DrvSYS_IsProtectedRegLocked PROC
;;;112    /*---------------------------------------------------------------------------------------------------------*/
;;;113    int32_t DrvSYS_IsProtectedRegLocked(void)
000000  4802              LDR      r0,|L25.12|
;;;114    {
;;;115        return (SYS->REGWRPROT & 0x01);
000002  6800              LDR      r0,[r0,#0]
000004  07c0              LSLS     r0,r0,#31
000006  0fc0              LSRS     r0,r0,#31
;;;116    }
000008  4770              BX       lr
;;;117    
                          ENDP

00000a  0000              DCW      0x0000
                  |L25.12|
                          DCD      0x50000100

                          AREA ||i.DrvSYS_LockProtectedReg||, CODE, READONLY, ALIGN=2

                  DrvSYS_LockProtectedReg PROC
;;;90     /*---------------------------------------------------------------------------------------------------------*/
;;;91     int32_t DrvSYS_LockProtectedReg(void)
000000  2000              MOVS     r0,#0
;;;92     {
;;;93         uint32_t lockbit;
;;;94         
;;;95         SYS->REGWRPROT = 0x00;
000002  4a06              LDR      r2,|L26.28|
000004  6010              STR      r0,[r2,#0]
;;;96     
;;;97         lockbit = SYS->REGWRPROT & 0x01;
000006  4610              MOV      r0,r2
000008  6800              LDR      r0,[r0,#0]
00000a  07c1              LSLS     r1,r0,#31
00000c  0fc9              LSRS     r1,r1,#31
;;;98         return (lockbit)? E_DRVSYS_ERR_LOCK_FAIL : 0;
00000e  2900              CMP      r1,#0
000010  d001              BEQ      |L26.22|
000012  4803              LDR      r0,|L26.32|
                  |L26.20|
;;;99     }
000014  4770              BX       lr
                  |L26.22|
000016  2000              MOVS     r0,#0                 ;98
000018  e7fc              B        |L26.20|
;;;100    
                          ENDP

00001a  0000              DCW      0x0000
                  |L26.28|
                          DCD      0x50000100
                  |L26.32|
                          DCD      0xffff9602

                          AREA ||i.DrvSYS_Open||, CODE, READONLY, ALIGN=2

                  DrvSYS_Open PROC
;;;1167   /*---------------------------------------------------------------------------------------------------------*/
;;;1168   int32_t DrvSYS_Open(uint32_t u32Hclk)
000000  b5f8              PUSH     {r3-r7,lr}
;;;1169   {
000002  4605              MOV      r5,r0
;;;1170       uint32_t u32PllCr;  
;;;1171       volatile uint32_t delayCnt;
;;;1172       E_SYS_PLL_CLKSRC ePllSrc = E_SYS_EXTERNAL_12M;
000004  2600              MOVS     r6,#0
;;;1173   
;;;1174       if ( (u32Hclk > FREQ_50MHZ) || (u32Hclk < FREQ_25MHZ) )
000006  4825              LDR      r0,|L27.156|
000008  4285              CMP      r5,r0
00000a  d802              BHI      |L27.18|
00000c  1040              ASRS     r0,r0,#1
00000e  4285              CMP      r5,r0
000010  d201              BCS      |L27.22|
                  |L27.18|
;;;1175       {
;;;1176           return E_DRVSYS_ERR_OUT_OF_RANGE;
000012  4823              LDR      r0,|L27.160|
                  |L27.20|
;;;1177       }
;;;1178           
;;;1179       /* Check the status of Register Write-Protection Function */
;;;1180       if (DrvSYS_IsProtectedRegLocked() == 0)
;;;1181       {
;;;1182           return E_DRVSYS_ERR_REG_PROTECTED;
;;;1183       }
;;;1184       
;;;1185       if (SYSCLK->PLLCON.PLL_SRC == 0)
;;;1186       {
;;;1187           SYSCLK->PWRCON.XTL12M_EN = 1;
;;;1188           ePllSrc = E_SYS_EXTERNAL_12M;
;;;1189       }
;;;1190       else
;;;1191       {
;;;1192           SYSCLK->PWRCON.OSC22M_EN = 1;
;;;1193           ePllSrc = E_SYS_INTERNAL_22M;
;;;1194       }
;;;1195   
;;;1196       u32PllCr = DrvSYS_GetPLLContent(ePllSrc, u32Hclk);
;;;1197       
;;;1198       /*Delay for 12M or 22M stable*/
;;;1199       for (delayCnt=0;delayCnt<10000;delayCnt++);
;;;1200   
;;;1201       DrvSYS_SetPLLContent(u32PllCr);
;;;1202       SYSCLK->PLLCON.OE     = 0;
;;;1203       SYSCLK->PLLCON.PD     = 0;
;;;1204       
;;;1205       /*Delay for PLL stable*/
;;;1206       for (delayCnt=0;delayCnt<10000;delayCnt++);
;;;1207   
;;;1208       /* Change HCLK clock source to be PLL. */
;;;1209       DrvSYS_SelectHCLKSource(2);
;;;1210       
;;;1211       return E_SUCCESS;
;;;1212   }
000014  bdf8              POP      {r3-r7,pc}
                  |L27.22|
000016  f7fffffe          BL       DrvSYS_IsProtectedRegLocked
00001a  2800              CMP      r0,#0                 ;1180
00001c  d102              BNE      |L27.36|
00001e  4820              LDR      r0,|L27.160|
000020  1c40              ADDS     r0,r0,#1              ;1182
000022  e7f7              B        |L27.20|
                  |L27.36|
000024  481f              LDR      r0,|L27.164|
000026  6a00              LDR      r0,[r0,#0x20]         ;1185
000028  0300              LSLS     r0,r0,#12             ;1185
00002a  0fc0              LSRS     r0,r0,#31             ;1185
00002c  d108              BNE      |L27.64|
00002e  481d              LDR      r0,|L27.164|
000030  6800              LDR      r0,[r0,#0]            ;1187
000032  0840              LSRS     r0,r0,#1              ;1187
000034  0040              LSLS     r0,r0,#1              ;1187
000036  1c40              ADDS     r0,r0,#1              ;1187
000038  491a              LDR      r1,|L27.164|
00003a  6008              STR      r0,[r1,#0]            ;1187
00003c  2600              MOVS     r6,#0                 ;1188
00003e  e007              B        |L27.80|
                  |L27.64|
000040  4818              LDR      r0,|L27.164|
000042  6800              LDR      r0,[r0,#0]            ;1192
000044  2104              MOVS     r1,#4                 ;1192
000046  4388              BICS     r0,r0,r1              ;1192
000048  1d00              ADDS     r0,r0,#4              ;1192
00004a  4916              LDR      r1,|L27.164|
00004c  6008              STR      r0,[r1,#0]            ;1192
00004e  2601              MOVS     r6,#1                 ;1193
                  |L27.80|
000050  4629              MOV      r1,r5                 ;1196
000052  4630              MOV      r0,r6                 ;1196
000054  f7fffffe          BL       DrvSYS_GetPLLContent
000058  4607              MOV      r7,r0                 ;1196
00005a  2400              MOVS     r4,#0                 ;1199
00005c  e000              B        |L27.96|
                  |L27.94|
00005e  1c64              ADDS     r4,r4,#1              ;1199
                  |L27.96|
000060  4811              LDR      r0,|L27.168|
000062  4284              CMP      r4,r0                 ;1199
000064  d3fb              BCC      |L27.94|
000066  4638              MOV      r0,r7                 ;1201
000068  f7fffffe          BL       DrvSYS_SetPLLContent
00006c  480d              LDR      r0,|L27.164|
00006e  6a00              LDR      r0,[r0,#0x20]         ;1202
000070  2101              MOVS     r1,#1                 ;1202
000072  0489              LSLS     r1,r1,#18             ;1202
000074  4388              BICS     r0,r0,r1              ;1202
000076  490b              LDR      r1,|L27.164|
000078  6208              STR      r0,[r1,#0x20]         ;1202
00007a  4608              MOV      r0,r1                 ;1203
00007c  6a00              LDR      r0,[r0,#0x20]         ;1203
00007e  01c9              LSLS     r1,r1,#7              ;1203
000080  4388              BICS     r0,r0,r1              ;1203
000082  4908              LDR      r1,|L27.164|
000084  6208              STR      r0,[r1,#0x20]         ;1203
000086  2400              MOVS     r4,#0                 ;1206
000088  e000              B        |L27.140|
                  |L27.138|
00008a  1c64              ADDS     r4,r4,#1              ;1206
                  |L27.140|
00008c  4806              LDR      r0,|L27.168|
00008e  4284              CMP      r4,r0                 ;1206
000090  d3fb              BCC      |L27.138|
000092  2002              MOVS     r0,#2                 ;1209
000094  f7fffffe          BL       DrvSYS_SelectHCLKSource
000098  2000              MOVS     r0,#0                 ;1211
00009a  e7bb              B        |L27.20|
;;;1213   
                          ENDP

                  |L27.156|
                          DCD      0x02faf080
                  |L27.160|
                          DCD      0xffff9606
                  |L27.164|
                          DCD      0x50000200
                  |L27.168|
                          DCD      0x00002710

                          AREA ||i.DrvSYS_ReadProductID||, CODE, READONLY, ALIGN=1

                  DrvSYS_ReadProductID PROC
;;;48     /*---------------------------------------------------------------------------------------------------------*/
;;;49     uint32_t DrvSYS_ReadProductID(void)
000000  2005              MOVS     r0,#5
;;;50     {   
;;;51         return SYS->PDID;
000002  0700              LSLS     r0,r0,#28
000004  6800              LDR      r0,[r0,#0]
;;;52     }
000006  4770              BX       lr
;;;53     
                          ENDP


                          AREA ||i.DrvSYS_ResetCPU||, CODE, READONLY, ALIGN=1

                  DrvSYS_ResetCPU PROC
;;;214    /*---------------------------------------------------------------------------------------------------------*/
;;;215    void DrvSYS_ResetCPU(void)
000000  2005              MOVS     r0,#5
;;;216    {
;;;217        SYS->IPRSTC1.CPU_RST = 1;
000002  0700              LSLS     r0,r0,#28
000004  6880              LDR      r0,[r0,#8]
000006  2102              MOVS     r1,#2
000008  4388              BICS     r0,r0,r1
00000a  1c80              ADDS     r0,r0,#2
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  6088              STR      r0,[r1,#8]
;;;218    }
000012  4770              BX       lr
;;;219    
                          ENDP


                          AREA ||i.DrvSYS_ResetChip||, CODE, READONLY, ALIGN=1

                  DrvSYS_ResetChip PROC
;;;237    /*---------------------------------------------------------------------------------------------------------*/
;;;238    void DrvSYS_ResetChip(void)
000000  2005              MOVS     r0,#5
;;;239    {
;;;240        SYS->IPRSTC1.CHIP_RST = 1;
000002  0700              LSLS     r0,r0,#28
000004  6880              LDR      r0,[r0,#8]
000006  0840              LSRS     r0,r0,#1
000008  0040              LSLS     r0,r0,#1
00000a  1c40              ADDS     r0,r0,#1
00000c  2105              MOVS     r1,#5
00000e  0709              LSLS     r1,r1,#28
000010  6088              STR      r0,[r1,#8]
;;;241    }
000012  4770              BX       lr
;;;242    
                          ENDP


                          AREA ||i.DrvSYS_ResetIP||, CODE, READONLY, ALIGN=1

                  DrvSYS_ResetIP PROC
;;;174    /*---------------------------------------------------------------------------------------------------------*/
;;;175    void DrvSYS_ResetIP(E_SYS_IP_RST eIpRst)
000000  2820              CMP      r0,#0x20
;;;176    {   
;;;177        uint32_t u32Reg;
;;;178    
;;;179        if (eIpRst == E_SYS_PDMA_RST)
000002  d110              BNE      |L31.38|
;;;180        {
;;;181            SYS->IPRSTC1.PDMA_RST = 1;
000004  2205              MOVS     r2,#5
000006  0712              LSLS     r2,r2,#28
000008  6892              LDR      r2,[r2,#8]
00000a  2304              MOVS     r3,#4
00000c  439a              BICS     r2,r2,r3
00000e  1d12              ADDS     r2,r2,#4
000010  2305              MOVS     r3,#5
000012  071b              LSLS     r3,r3,#28
000014  609a              STR      r2,[r3,#8]
;;;182            SYS->IPRSTC1.PDMA_RST = 0;
000016  461a              MOV      r2,r3
000018  6892              LDR      r2,[r2,#8]
00001a  2304              MOVS     r3,#4
00001c  439a              BICS     r2,r2,r3
00001e  2305              MOVS     r3,#5
000020  071b              LSLS     r3,r3,#28
000022  609a              STR      r2,[r3,#8]
000024  e022              B        |L31.108|
                  |L31.38|
;;;183        }
;;;184        else if (eIpRst == E_SYS_EBI_RST)
000026  2821              CMP      r0,#0x21
000028  d110              BNE      |L31.76|
;;;185        {
;;;186            SYS->IPRSTC1.EBI_RST = 1;
00002a  2205              MOVS     r2,#5
00002c  0712              LSLS     r2,r2,#28
00002e  6892              LDR      r2,[r2,#8]
000030  2308              MOVS     r3,#8
000032  439a              BICS     r2,r2,r3
000034  3208              ADDS     r2,r2,#8
000036  2305              MOVS     r3,#5
000038  071b              LSLS     r3,r3,#28
00003a  609a              STR      r2,[r3,#8]
;;;187            SYS->IPRSTC1.EBI_RST = 0;   
00003c  461a              MOV      r2,r3
00003e  6892              LDR      r2,[r2,#8]
000040  2308              MOVS     r3,#8
000042  439a              BICS     r2,r2,r3
000044  2305              MOVS     r3,#5
000046  071b              LSLS     r3,r3,#28
000048  609a              STR      r2,[r3,#8]
00004a  e00f              B        |L31.108|
                  |L31.76|
;;;188        }
;;;189        else
;;;190        {
;;;191            u32Reg = *((__IO uint32_t *) &SYS->IPRSTC2);
00004c  2205              MOVS     r2,#5
00004e  0712              LSLS     r2,r2,#28
000050  68d1              LDR      r1,[r2,#0xc]
;;;192            *((__IO uint32_t *) &SYS->IPRSTC2) = u32Reg | (1<<eIpRst);
000052  2201              MOVS     r2,#1
000054  4082              LSLS     r2,r2,r0
000056  430a              ORRS     r2,r2,r1
000058  2305              MOVS     r3,#5
00005a  071b              LSLS     r3,r3,#28
00005c  60da              STR      r2,[r3,#0xc]
;;;193            *((__IO uint32_t *) &SYS->IPRSTC2) = u32Reg & ~(1<<eIpRst);
00005e  2201              MOVS     r2,#1
000060  4082              LSLS     r2,r2,r0
000062  460b              MOV      r3,r1
000064  4393              BICS     r3,r3,r2
000066  2205              MOVS     r2,#5
000068  0712              LSLS     r2,r2,#28
00006a  60d3              STR      r3,[r2,#0xc]
                  |L31.108|
;;;194        }
;;;195    }
00006c  4770              BX       lr
;;;196    
                          ENDP


                          AREA ||i.DrvSYS_SelectBODVolt||, CODE, READONLY, ALIGN=1

                  DrvSYS_SelectBODVolt PROC
;;;261    /*---------------------------------------------------------------------------------------------------------*/
;;;262    void DrvSYS_SelectBODVolt(uint8_t u8Volt)
000000  2105              MOVS     r1,#5
;;;263    {
;;;264        SYS->BODCR.BOD_VL = u8Volt;
000002  0709              LSLS     r1,r1,#28
000004  6989              LDR      r1,[r1,#0x18]
000006  2206              MOVS     r2,#6
000008  4391              BICS     r1,r1,r2
00000a  0042              LSLS     r2,r0,#1
00000c  2306              MOVS     r3,#6
00000e  401a              ANDS     r2,r2,r3
000010  4311              ORRS     r1,r1,r2
000012  2205              MOVS     r2,#5
000014  0712              LSLS     r2,r2,#28
000016  6191              STR      r1,[r2,#0x18]
;;;265    }
000018  4770              BX       lr
;;;266    
                          ENDP


                          AREA ||i.DrvSYS_SelectHCLKSource||, CODE, READONLY, ALIGN=2

                  DrvSYS_SelectHCLKSource PROC
;;;598    /*---------------------------------------------------------------------------------------------------------*/
;;;599    int32_t DrvSYS_SelectHCLKSource(uint8_t u8ClkSrcSel)
000000  b510              PUSH     {r4,lr}
;;;600    {
000002  4604              MOV      r4,r0
;;;601        if ((u8ClkSrcSel > 7) || ((u8ClkSrcSel > 3) && (u8ClkSrcSel < 7)))
000004  2c07              CMP      r4,#7
000006  dc03              BGT      |L33.16|
000008  2c03              CMP      r4,#3
00000a  dd03              BLE      |L33.20|
00000c  2c07              CMP      r4,#7
00000e  da01              BGE      |L33.20|
                  |L33.16|
;;;602        {
;;;603            return E_DRVSYS_ERR_ARGUMENT;
000010  4807              LDR      r0,|L33.48|
                  |L33.18|
;;;604        }
;;;605        else
;;;606        {
;;;607            SYSCLK->CLKSEL0.HCLK_S = u8ClkSrcSel;
;;;608        }
;;;609        
;;;610        SystemCoreClockUpdate();
;;;611        
;;;612        return 0;
;;;613    }
000012  bd10              POP      {r4,pc}
                  |L33.20|
000014  4807              LDR      r0,|L33.52|
000016  6900              LDR      r0,[r0,#0x10]         ;607
000018  08c0              LSRS     r0,r0,#3              ;607
00001a  00c0              LSLS     r0,r0,#3              ;607
00001c  0761              LSLS     r1,r4,#29             ;607
00001e  0f49              LSRS     r1,r1,#29             ;607
000020  4308              ORRS     r0,r0,r1              ;607
000022  4904              LDR      r1,|L33.52|
000024  6108              STR      r0,[r1,#0x10]         ;607
000026  f7fffffe          BL       SystemCoreClockUpdate
00002a  2000              MOVS     r0,#0                 ;612
00002c  e7f1              B        |L33.18|
;;;614    
                          ENDP

00002e  0000              DCW      0x0000
                  |L33.48|
                          DCD      0xffff9603
                  |L33.52|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SelectIPClockSource||, CODE, READONLY, ALIGN=2

                  DrvSYS_SelectIPClockSource PROC
;;;697    /*---------------------------------------------------------------------------------------------------------*/
;;;698    int32_t DrvSYS_SelectIPClockSource(E_SYS_IP_CLKSRC eIpClkSrc, uint8_t u8ClkSrcSel)
000000  b510              PUSH     {r4,lr}
;;;699    {
000002  4602              MOV      r2,r0
;;;700        
;;;701        switch(eIpClkSrc)
000004  4613              MOV      r3,r2
000006  f7fffffe          BL       __ARM_common_switch8
00000a  0d97              DCB      0x0d,0x97
00000c  8c7f7265          DCB      0x8c,0x7f,0x72,0x65
000010  584b3e33          DCB      0x58,0x4b,0x3e,0x33
000014  1308281d          DCB      0x13,0x08,0x28,0x1d
000018  a100              DCB      0xa1,0x00
;;;702        {
;;;703            case E_SYS_FRQDIV_CLKSRC:  
;;;704                SYSCLK->CLKSEL2.FRQDIV_S = u8ClkSrcSel;
00001a  484f              LDR      r0,|L34.344|
00001c  69c0              LDR      r0,[r0,#0x1c]
00001e  230c              MOVS     r3,#0xc
000020  4398              BICS     r0,r0,r3
000022  008b              LSLS     r3,r1,#2
000024  240c              MOVS     r4,#0xc
000026  4023              ANDS     r3,r3,r4
000028  4318              ORRS     r0,r0,r3
00002a  4b4b              LDR      r3,|L34.344|
00002c  61d8              STR      r0,[r3,#0x1c]
;;;705                break;
00002e  e08f              B        |L34.336|
;;;706            case E_SYS_I2S_CLKSRC:
;;;707                SYSCLK->CLKSEL2.I2S_S = u8ClkSrcSel;
000030  4849              LDR      r0,|L34.344|
000032  69c0              LDR      r0,[r0,#0x1c]
000034  0880              LSRS     r0,r0,#2
000036  0080              LSLS     r0,r0,#2
000038  078b              LSLS     r3,r1,#30
00003a  0f9b              LSRS     r3,r3,#30
00003c  4318              ORRS     r0,r0,r3
00003e  4b46              LDR      r3,|L34.344|
000040  61d8              STR      r0,[r3,#0x1c]
;;;708                break;
000042  e085              B        |L34.336|
;;;709            case E_SYS_PWM67_CLKSRC:  
;;;710                SYSCLK->CLKSEL2.PWM67_S = u8ClkSrcSel;
000044  4844              LDR      r0,|L34.344|
000046  69c0              LDR      r0,[r0,#0x1c]
000048  23c0              MOVS     r3,#0xc0
00004a  4398              BICS     r0,r0,r3
00004c  018b              LSLS     r3,r1,#6
00004e  24c0              MOVS     r4,#0xc0
000050  4023              ANDS     r3,r3,r4
000052  4318              ORRS     r0,r0,r3
000054  4b40              LDR      r3,|L34.344|
000056  61d8              STR      r0,[r3,#0x1c]
;;;711                break;
000058  e07a              B        |L34.336|
;;;712            case E_SYS_PWM45_CLKSRC:
;;;713                SYSCLK->CLKSEL2.PWM45_S = u8ClkSrcSel;
00005a  483f              LDR      r0,|L34.344|
00005c  69c0              LDR      r0,[r0,#0x1c]
00005e  2330              MOVS     r3,#0x30
000060  4398              BICS     r0,r0,r3
000062  010b              LSLS     r3,r1,#4
000064  2430              MOVS     r4,#0x30
000066  4023              ANDS     r3,r3,r4
000068  4318              ORRS     r0,r0,r3
00006a  4b3b              LDR      r3,|L34.344|
00006c  61d8              STR      r0,[r3,#0x1c]
;;;714                break;
00006e  e06f              B        |L34.336|
;;;715            case E_SYS_PWM23_CLKSRC:  
;;;716                SYSCLK->CLKSEL1.PWM23_S = u8ClkSrcSel;
000070  4839              LDR      r0,|L34.344|
000072  6940              LDR      r0,[r0,#0x14]
000074  0080              LSLS     r0,r0,#2
000076  0880              LSRS     r0,r0,#2
000078  078b              LSLS     r3,r1,#30
00007a  0f9b              LSRS     r3,r3,#30
00007c  079b              LSLS     r3,r3,#30
00007e  4318              ORRS     r0,r0,r3
000080  4b35              LDR      r3,|L34.344|
000082  6158              STR      r0,[r3,#0x14]
;;;717                break;
000084  e064              B        |L34.336|
;;;718            case E_SYS_PWM01_CLKSRC:
;;;719                SYSCLK->CLKSEL1.PWM01_S = u8ClkSrcSel;
000086  4834              LDR      r0,|L34.344|
000088  6940              LDR      r0,[r0,#0x14]
00008a  2303              MOVS     r3,#3
00008c  071b              LSLS     r3,r3,#28
00008e  4398              BICS     r0,r0,r3
000090  070b              LSLS     r3,r1,#28
000092  2403              MOVS     r4,#3
000094  0724              LSLS     r4,r4,#28
000096  4023              ANDS     r3,r3,r4
000098  4318              ORRS     r0,r0,r3
00009a  4b2f              LDR      r3,|L34.344|
00009c  6158              STR      r0,[r3,#0x14]
;;;720                break;
00009e  e057              B        |L34.336|
;;;721            case E_SYS_UART_CLKSRC:
;;;722                SYSCLK->CLKSEL1.UART_S = u8ClkSrcSel;
0000a0  482d              LDR      r0,|L34.344|
0000a2  6940              LDR      r0,[r0,#0x14]
0000a4  2303              MOVS     r3,#3
0000a6  061b              LSLS     r3,r3,#24
0000a8  4398              BICS     r0,r0,r3
0000aa  060b              LSLS     r3,r1,#24
0000ac  2403              MOVS     r4,#3
0000ae  0624              LSLS     r4,r4,#24
0000b0  4023              ANDS     r3,r3,r4
0000b2  4318              ORRS     r0,r0,r3
0000b4  4b28              LDR      r3,|L34.344|
0000b6  6158              STR      r0,[r3,#0x14]
;;;723                break;
0000b8  e04a              B        |L34.336|
;;;724            case E_SYS_TMR3_CLKSRC:
;;;725                SYSCLK->CLKSEL1.TMR3_S = u8ClkSrcSel;
0000ba  4827              LDR      r0,|L34.344|
0000bc  6940              LDR      r0,[r0,#0x14]
0000be  2307              MOVS     r3,#7
0000c0  051b              LSLS     r3,r3,#20
0000c2  4398              BICS     r0,r0,r3
0000c4  050b              LSLS     r3,r1,#20
0000c6  2407              MOVS     r4,#7
0000c8  0524              LSLS     r4,r4,#20
0000ca  4023              ANDS     r3,r3,r4
0000cc  4318              ORRS     r0,r0,r3
0000ce  4b22              LDR      r3,|L34.344|
0000d0  6158              STR      r0,[r3,#0x14]
;;;726                break;
0000d2  e03d              B        |L34.336|
;;;727            case E_SYS_TMR2_CLKSRC:
;;;728                SYSCLK->CLKSEL1.TMR2_S = u8ClkSrcSel;
0000d4  4820              LDR      r0,|L34.344|
0000d6  6940              LDR      r0,[r0,#0x14]
0000d8  2307              MOVS     r3,#7
0000da  041b              LSLS     r3,r3,#16
0000dc  4398              BICS     r0,r0,r3
0000de  040b              LSLS     r3,r1,#16
0000e0  2407              MOVS     r4,#7
0000e2  0424              LSLS     r4,r4,#16
0000e4  4023              ANDS     r3,r3,r4
0000e6  4318              ORRS     r0,r0,r3
0000e8  4b1b              LDR      r3,|L34.344|
0000ea  6158              STR      r0,[r3,#0x14]
;;;729                break;
0000ec  e030              B        |L34.336|
;;;730            case E_SYS_TMR1_CLKSRC:
;;;731                SYSCLK->CLKSEL1.TMR1_S = u8ClkSrcSel;
0000ee  481a              LDR      r0,|L34.344|
0000f0  6940              LDR      r0,[r0,#0x14]
0000f2  2307              MOVS     r3,#7
0000f4  031b              LSLS     r3,r3,#12
0000f6  4398              BICS     r0,r0,r3
0000f8  030b              LSLS     r3,r1,#12
0000fa  2407              MOVS     r4,#7
0000fc  0324              LSLS     r4,r4,#12
0000fe  4023              ANDS     r3,r3,r4
000100  4318              ORRS     r0,r0,r3
000102  4b15              LDR      r3,|L34.344|
000104  6158              STR      r0,[r3,#0x14]
;;;732                break;
000106  e023              B        |L34.336|
;;;733            case E_SYS_TMR0_CLKSRC:
;;;734                SYSCLK->CLKSEL1.TMR0_S = u8ClkSrcSel;
000108  4813              LDR      r0,|L34.344|
00010a  6940              LDR      r0,[r0,#0x14]
00010c  2307              MOVS     r3,#7
00010e  021b              LSLS     r3,r3,#8
000110  4398              BICS     r0,r0,r3
000112  020b              LSLS     r3,r1,#8
000114  2407              MOVS     r4,#7
000116  0224              LSLS     r4,r4,#8
000118  4023              ANDS     r3,r3,r4
00011a  4318              ORRS     r0,r0,r3
00011c  4b0e              LDR      r3,|L34.344|
00011e  6158              STR      r0,[r3,#0x14]
;;;735                break;
000120  e016              B        |L34.336|
;;;736            case E_SYS_ADC_CLKSRC:
;;;737                SYSCLK->CLKSEL1.ADC_S = u8ClkSrcSel;
000122  480d              LDR      r0,|L34.344|
000124  6940              LDR      r0,[r0,#0x14]
000126  230c              MOVS     r3,#0xc
000128  4398              BICS     r0,r0,r3
00012a  008b              LSLS     r3,r1,#2
00012c  240c              MOVS     r4,#0xc
00012e  4023              ANDS     r3,r3,r4
000130  4318              ORRS     r0,r0,r3
000132  4b09              LDR      r3,|L34.344|
000134  6158              STR      r0,[r3,#0x14]
;;;738                break;
000136  e00b              B        |L34.336|
;;;739            case E_SYS_WDT_CLKSRC:
;;;740                SYSCLK->CLKSEL1.WDT_S = u8ClkSrcSel;
000138  4807              LDR      r0,|L34.344|
00013a  6940              LDR      r0,[r0,#0x14]
00013c  0880              LSRS     r0,r0,#2
00013e  0080              LSLS     r0,r0,#2
000140  078b              LSLS     r3,r1,#30
000142  0f9b              LSRS     r3,r3,#30
000144  4318              ORRS     r0,r0,r3
000146  4b04              LDR      r3,|L34.344|
000148  6158              STR      r0,[r3,#0x14]
;;;741                break;
00014a  e001              B        |L34.336|
;;;742            default:
;;;743                return E_DRVSYS_ERR_IPSRC;
00014c  4803              LDR      r0,|L34.348|
                  |L34.334|
;;;744        }
;;;745        
;;;746        return E_SUCCESS;
;;;747    }
00014e  bd10              POP      {r4,pc}
                  |L34.336|
000150  bf00              NOP                            ;705
000152  2000              MOVS     r0,#0                 ;746
000154  e7fb              B        |L34.334|
;;;748    
                          ENDP

000156  0000              DCW      0x0000
                  |L34.344|
                          DCD      0x50000200
                  |L34.348|
                          DCD      0xffff9604

                          AREA ||i.DrvSYS_SelectPLLSource||, CODE, READONLY, ALIGN=2

                  DrvSYS_SelectPLLSource PROC
;;;933    /*---------------------------------------------------------------------------------------------------------*/
;;;934    void DrvSYS_SelectPLLSource(E_SYS_PLL_CLKSRC ePllSrc)
000000  4906              LDR      r1,|L35.28|
;;;935    {
;;;936        SYSCLK->PLLCON.PLL_SRC = ePllSrc;
000002  6a09              LDR      r1,[r1,#0x20]
000004  2201              MOVS     r2,#1
000006  04d2              LSLS     r2,r2,#19
000008  4391              BICS     r1,r1,r2
00000a  04c2              LSLS     r2,r0,#19
00000c  2301              MOVS     r3,#1
00000e  04db              LSLS     r3,r3,#19
000010  401a              ANDS     r2,r2,r3
000012  4311              ORRS     r1,r1,r2
000014  4a01              LDR      r2,|L35.28|
000016  6211              STR      r1,[r2,#0x20]
;;;937    }
000018  4770              BX       lr
;;;938    
                          ENDP

00001a  0000              DCW      0x0000
                  |L35.28|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SelectSysTickSource||, CODE, READONLY, ALIGN=2

                  DrvSYS_SelectSysTickSource PROC
;;;637    /*---------------------------------------------------------------------------------------------------------*/
;;;638    int32_t DrvSYS_SelectSysTickSource(uint8_t u8ClkSrcSel)
000000  4601              MOV      r1,r0
;;;639    {
;;;640        if ((u8ClkSrcSel > 7) || ((u8ClkSrcSel > 3) && (u8ClkSrcSel < 7)))
000002  2907              CMP      r1,#7
000004  dc03              BGT      |L36.14|
000006  2903              CMP      r1,#3
000008  dd03              BLE      |L36.18|
00000a  2907              CMP      r1,#7
00000c  da01              BGE      |L36.18|
                  |L36.14|
;;;641        {
;;;642            return E_DRVSYS_ERR_ARGUMENT;
00000e  4807              LDR      r0,|L36.44|
                  |L36.16|
;;;643        }
;;;644        else
;;;645        {
;;;646            SYSCLK->CLKSEL0.STCLK_S = u8ClkSrcSel;
;;;647        }
;;;648        return 0;
;;;649    }
000010  4770              BX       lr
                  |L36.18|
000012  4807              LDR      r0,|L36.48|
000014  6900              LDR      r0,[r0,#0x10]         ;646
000016  2238              MOVS     r2,#0x38              ;646
000018  4390              BICS     r0,r0,r2              ;646
00001a  00ca              LSLS     r2,r1,#3              ;646
00001c  2338              MOVS     r3,#0x38              ;646
00001e  401a              ANDS     r2,r2,r3              ;646
000020  4310              ORRS     r0,r0,r2              ;646
000022  4a03              LDR      r2,|L36.48|
000024  6110              STR      r0,[r2,#0x10]         ;646
000026  2000              MOVS     r0,#0                 ;648
000028  e7f2              B        |L36.16|
;;;650    
                          ENDP

00002a  0000              DCW      0x0000
                  |L36.44|
                          DCD      0xffff9603
                  |L36.48|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SetBODFunction||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetBODFunction PROC
;;;287    /*---------------------------------------------------------------------------------------------------------*/
;;;288    void DrvSYS_SetBODFunction(int32_t i32Enable, int32_t i32Mode, BOD_CALLBACK bodcallbackFn)
000000  b570              PUSH     {r4-r6,lr}
;;;289    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;290        SYS->BODCR.BOD_EN = i32Enable;
000008  2005              MOVS     r0,#5
00000a  0700              LSLS     r0,r0,#28
00000c  6980              LDR      r0,[r0,#0x18]
00000e  0840              LSRS     r0,r0,#1
000010  0040              LSLS     r0,r0,#1
000012  07e1              LSLS     r1,r4,#31
000014  0fc9              LSRS     r1,r1,#31
000016  4308              ORRS     r0,r0,r1
000018  2105              MOVS     r1,#5
00001a  0709              LSLS     r1,r1,#28
00001c  6188              STR      r0,[r1,#0x18]
;;;291    
;;;292        if (i32Enable)
00001e  2c00              CMP      r4,#0
000020  d019              BEQ      |L37.86|
;;;293        {
;;;294            SYS->BODCR.BOD_RSTEN = i32Mode;
000022  4608              MOV      r0,r1
000024  6980              LDR      r0,[r0,#0x18]
000026  2108              MOVS     r1,#8
000028  4388              BICS     r0,r0,r1
00002a  00e9              LSLS     r1,r5,#3
00002c  2208              MOVS     r2,#8
00002e  4011              ANDS     r1,r1,r2
000030  4308              ORRS     r0,r0,r1
000032  2105              MOVS     r1,#5
000034  0709              LSLS     r1,r1,#28
000036  6188              STR      r0,[r1,#0x18]
;;;295        
;;;296            if (i32Mode)
000038  2d00              CMP      r5,#0
00003a  d003              BEQ      |L37.68|
;;;297            {       
;;;298                NVIC_DisableIRQ(BOD_IRQn);
00003c  2000              MOVS     r0,#0
00003e  f7fffffe          BL       NVIC_DisableIRQ
000042  e008              B        |L37.86|
                  |L37.68|
;;;299            }
;;;300            else
;;;301            { 
;;;302                BOD_callbackFn = bodcallbackFn;
000044  4804              LDR      r0,|L37.88|
000046  6006              STR      r6,[r0,#0]  ; BOD_callbackFn
;;;303                NVIC_SetPriority(BOD_IRQn, (1<<__NVIC_PRIO_BITS) - 2);
000048  2102              MOVS     r1,#2
00004a  2000              MOVS     r0,#0
00004c  f7fffffe          BL       NVIC_SetPriority
;;;304                NVIC_EnableIRQ(BOD_IRQn);
000050  2000              MOVS     r0,#0
000052  f7fffffe          BL       NVIC_EnableIRQ
                  |L37.86|
;;;305            }
;;;306        }   
;;;307    }
000056  bd70              POP      {r4-r6,pc}
;;;308    
                          ENDP

                  |L37.88|
                          DCD      BOD_callbackFn

                          AREA ||i.DrvSYS_SetClockDivider||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetClockDivider PROC
;;;763    /*---------------------------------------------------------------------------------------------------------*/
;;;764    int32_t DrvSYS_SetClockDivider(E_SYS_IP_DIV eIpDiv , int32_t i32value)
000000  b570              PUSH     {r4-r6,lr}
;;;765    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;766        if (eIpDiv == E_SYS_ADC_DIV)
000006  2c00              CMP      r4,#0
000008  d10c              BNE      |L38.36|
;;;767        {
;;;768            SYSCLK->CLKDIV.ADC_N = i32value;
00000a  481d              LDR      r0,|L38.128|
00000c  6980              LDR      r0,[r0,#0x18]
00000e  21ff              MOVS     r1,#0xff
000010  0409              LSLS     r1,r1,#16
000012  4388              BICS     r0,r0,r1
000014  0429              LSLS     r1,r5,#16
000016  22ff              MOVS     r2,#0xff
000018  0412              LSLS     r2,r2,#16
00001a  4011              ANDS     r1,r1,r2
00001c  4308              ORRS     r0,r0,r1
00001e  4918              LDR      r1,|L38.128|
000020  6188              STR      r0,[r1,#0x18]
000022  e02b              B        |L38.124|
                  |L38.36|
;;;769        }
;;;770        else if(eIpDiv == E_SYS_UART_DIV)
000024  2c01              CMP      r4,#1
000026  d10c              BNE      |L38.66|
;;;771        {
;;;772            SYSCLK->CLKDIV.UART_N = i32value;
000028  4815              LDR      r0,|L38.128|
00002a  6980              LDR      r0,[r0,#0x18]
00002c  210f              MOVS     r1,#0xf
00002e  0209              LSLS     r1,r1,#8
000030  4388              BICS     r0,r0,r1
000032  0229              LSLS     r1,r5,#8
000034  220f              MOVS     r2,#0xf
000036  0212              LSLS     r2,r2,#8
000038  4011              ANDS     r1,r1,r2
00003a  4308              ORRS     r0,r0,r1
00003c  4910              LDR      r1,|L38.128|
00003e  6188              STR      r0,[r1,#0x18]
000040  e01c              B        |L38.124|
                  |L38.66|
;;;773        }
;;;774        else if(eIpDiv == E_SYS_USB_DIV)
000042  2c02              CMP      r4,#2
000044  d10a              BNE      |L38.92|
;;;775        {
;;;776            SYSCLK->CLKDIV.USB_N = i32value;
000046  480e              LDR      r0,|L38.128|
000048  6980              LDR      r0,[r0,#0x18]
00004a  21f0              MOVS     r1,#0xf0
00004c  4388              BICS     r0,r0,r1
00004e  0129              LSLS     r1,r5,#4
000050  22f0              MOVS     r2,#0xf0
000052  4011              ANDS     r1,r1,r2
000054  4308              ORRS     r0,r0,r1
000056  490a              LDR      r1,|L38.128|
000058  6188              STR      r0,[r1,#0x18]
00005a  e00f              B        |L38.124|
                  |L38.92|
;;;777        }
;;;778        else if(eIpDiv == E_SYS_HCLK_DIV)
00005c  2c03              CMP      r4,#3
00005e  d10b              BNE      |L38.120|
;;;779        {
;;;780            SYSCLK->CLKDIV.HCLK_N = i32value;
000060  4807              LDR      r0,|L38.128|
000062  6980              LDR      r0,[r0,#0x18]
000064  0900              LSRS     r0,r0,#4
000066  0100              LSLS     r0,r0,#4
000068  0729              LSLS     r1,r5,#28
00006a  0f09              LSRS     r1,r1,#28
00006c  4308              ORRS     r0,r0,r1
00006e  4904              LDR      r1,|L38.128|
000070  6188              STR      r0,[r1,#0x18]
;;;781            SystemCoreClockUpdate();
000072  f7fffffe          BL       SystemCoreClockUpdate
000076  e001              B        |L38.124|
                  |L38.120|
;;;782        }
;;;783        else
;;;784            return E_DRVSYS_ERR_IPDIV;
000078  4802              LDR      r0,|L38.132|
                  |L38.122|
;;;785    
;;;786        return E_SUCCESS;
;;;787    }
00007a  bd70              POP      {r4-r6,pc}
                  |L38.124|
00007c  2000              MOVS     r0,#0                 ;786
00007e  e7fc              B        |L38.122|
;;;788    
                          ENDP

                  |L38.128|
                          DCD      0x50000200
                  |L38.132|
                          DCD      0xffff9605

                          AREA ||i.DrvSYS_SetFreqDividerOutput||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetFreqDividerOutput PROC
;;;1230   /*---------------------------------------------------------------------------------------------------------*/
;;;1231   int32_t DrvSYS_SetFreqDividerOutput(int32_t i32Flag, uint8_t u8Divider)
000000  b530              PUSH     {r4,r5,lr}
;;;1232   {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
;;;1233       if (u8Divider > 15)
000006  2d0f              CMP      r5,#0xf
000008  dd01              BLE      |L39.14|
;;;1234           return E_DRVSYS_ERR_ARGUMENT;
00000a  480e              LDR      r0,|L39.68|
                  |L39.12|
;;;1235   
;;;1236       if (i32Flag)
;;;1237       {
;;;1238           SYSCLK->FRQDIV.FSEL = u8Divider;
;;;1239       }
;;;1240       SYSCLK->FRQDIV.FDIV_EN = i32Flag;
;;;1241       DrvSYS_SetIPClock(E_SYS_FDIV_CLK, i32Flag);
;;;1242   
;;;1243       return E_SUCCESS;
;;;1244   }
00000c  bd30              POP      {r4,r5,pc}
                  |L39.14|
00000e  2c00              CMP      r4,#0                 ;1236
000010  d008              BEQ      |L39.36|
000012  480d              LDR      r0,|L39.72|
000014  6a40              LDR      r0,[r0,#0x24]         ;1238
000016  0900              LSRS     r0,r0,#4              ;1238
000018  0100              LSLS     r0,r0,#4              ;1238
00001a  0729              LSLS     r1,r5,#28             ;1238
00001c  0f09              LSRS     r1,r1,#28             ;1238
00001e  4308              ORRS     r0,r0,r1              ;1238
000020  4909              LDR      r1,|L39.72|
000022  6248              STR      r0,[r1,#0x24]         ;1238
                  |L39.36|
000024  4808              LDR      r0,|L39.72|
000026  6a40              LDR      r0,[r0,#0x24]         ;1240
000028  2110              MOVS     r1,#0x10              ;1240
00002a  4388              BICS     r0,r0,r1              ;1240
00002c  0121              LSLS     r1,r4,#4              ;1240
00002e  2210              MOVS     r2,#0x10              ;1240
000030  4011              ANDS     r1,r1,r2              ;1240
000032  4308              ORRS     r0,r0,r1              ;1240
000034  4904              LDR      r1,|L39.72|
000036  6248              STR      r0,[r1,#0x24]         ;1240
000038  4621              MOV      r1,r4                 ;1241
00003a  2006              MOVS     r0,#6                 ;1241
00003c  f7fffffe          BL       DrvSYS_SetIPClock
000040  2000              MOVS     r0,#0                 ;1243
000042  e7e3              B        |L39.12|
;;;1245   
                          ENDP

                  |L39.68|
                          DCD      0xffff9603
                  |L39.72|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SetIPClock||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetIPClock PROC
;;;544    /*---------------------------------------------------------------------------------------------------------*/
;;;545    void DrvSYS_SetIPClock(E_SYS_IP_CLK eIpClk, int32_t i32Enable)
000000  b530              PUSH     {r4,r5,lr}
;;;546    {   
;;;547        uint32_t u32Reg;
;;;548    
;;;549        if (eIpClk == E_SYS_PDMA_CLK)
000002  2821              CMP      r0,#0x21
000004  d10a              BNE      |L40.28|
;;;550        {
;;;551            SYSCLK->AHBCLK.PDMA_EN = i32Enable;
000006  4b1b              LDR      r3,|L40.116|
000008  685b              LDR      r3,[r3,#4]
00000a  2402              MOVS     r4,#2
00000c  43a3              BICS     r3,r3,r4
00000e  004c              LSLS     r4,r1,#1
000010  2502              MOVS     r5,#2
000012  402c              ANDS     r4,r4,r5
000014  4323              ORRS     r3,r3,r4
000016  4c17              LDR      r4,|L40.116|
000018  6063              STR      r3,[r4,#4]
00001a  e029              B        |L40.112|
                  |L40.28|
;;;552        }
;;;553        else if (eIpClk == E_SYS_EBI_CLK)
00001c  2823              CMP      r0,#0x23
00001e  d10a              BNE      |L40.54|
;;;554        {
;;;555            SYSCLK->AHBCLK.EBI_EN = i32Enable;
000020  4b14              LDR      r3,|L40.116|
000022  685b              LDR      r3,[r3,#4]
000024  2408              MOVS     r4,#8
000026  43a3              BICS     r3,r3,r4
000028  00cc              LSLS     r4,r1,#3
00002a  2508              MOVS     r5,#8
00002c  402c              ANDS     r4,r4,r5
00002e  4323              ORRS     r3,r3,r4
000030  4c10              LDR      r4,|L40.116|
000032  6063              STR      r3,[r4,#4]
000034  e01c              B        |L40.112|
                  |L40.54|
;;;556        }
;;;557        else if (eIpClk == E_SYS_ISP_CLK)
000036  2822              CMP      r0,#0x22
000038  d10a              BNE      |L40.80|
;;;558        {
;;;559            SYSCLK->AHBCLK.ISP_EN = i32Enable;
00003a  4b0e              LDR      r3,|L40.116|
00003c  685b              LDR      r3,[r3,#4]
00003e  2404              MOVS     r4,#4
000040  43a3              BICS     r3,r3,r4
000042  008c              LSLS     r4,r1,#2
000044  2504              MOVS     r5,#4
000046  402c              ANDS     r4,r4,r5
000048  4323              ORRS     r3,r3,r4
00004a  4c0a              LDR      r4,|L40.116|
00004c  6063              STR      r3,[r4,#4]
00004e  e00f              B        |L40.112|
                  |L40.80|
;;;560        }
;;;561        else
;;;562        {
;;;563            u32Reg = *((__IO uint32_t *) &SYSCLK->APBCLK);
000050  4b08              LDR      r3,|L40.116|
000052  689a              LDR      r2,[r3,#8]
;;;564            
;;;565            if (i32Enable)
000054  2900              CMP      r1,#0
000056  d005              BEQ      |L40.100|
;;;566            {
;;;567                *((__IO uint32_t *) &SYSCLK->APBCLK) = u32Reg | (1<<eIpClk);
000058  2301              MOVS     r3,#1
00005a  4083              LSLS     r3,r3,r0
00005c  4313              ORRS     r3,r3,r2
00005e  4c05              LDR      r4,|L40.116|
000060  60a3              STR      r3,[r4,#8]
000062  e005              B        |L40.112|
                  |L40.100|
;;;568            }
;;;569            else
;;;570            {
;;;571                *((__IO uint32_t *) &SYSCLK->APBCLK) = u32Reg & ~(1<<eIpClk);
000064  2301              MOVS     r3,#1
000066  4083              LSLS     r3,r3,r0
000068  4614              MOV      r4,r2
00006a  439c              BICS     r4,r4,r3
00006c  4b01              LDR      r3,|L40.116|
00006e  609c              STR      r4,[r3,#8]
                  |L40.112|
;;;572            }
;;;573        }
;;;574    }
000070  bd30              POP      {r4,r5,pc}
;;;575    
                          ENDP

000072  0000              DCW      0x0000
                  |L40.116|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SetOscCtrl||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetOscCtrl PROC
;;;809    /*---------------------------------------------------------------------------------------------------------*/
;;;810    int32_t DrvSYS_SetOscCtrl(E_SYS_CHIP_CLKSRC eClkSrc, int32_t i32Enable)
000000  b510              PUSH     {r4,lr}
;;;811    {   
000002  4602              MOV      r2,r0
;;;812        switch(eClkSrc)
000004  2a00              CMP      r2,#0
000006  d006              BEQ      |L41.22|
000008  2a01              CMP      r2,#1
00000a  d00e              BEQ      |L41.42|
00000c  2a02              CMP      r2,#2
00000e  d017              BEQ      |L41.64|
000010  2a03              CMP      r2,#3
000012  d12b              BNE      |L41.108|
000014  e01f              B        |L41.86|
                  |L41.22|
;;;813        {
;;;814            case E_SYS_XTL12M:
;;;815                SYSCLK->PWRCON.XTL12M_EN = i32Enable;
000016  4818              LDR      r0,|L41.120|
000018  6800              LDR      r0,[r0,#0]
00001a  0840              LSRS     r0,r0,#1
00001c  0040              LSLS     r0,r0,#1
00001e  07cb              LSLS     r3,r1,#31
000020  0fdb              LSRS     r3,r3,#31
000022  4318              ORRS     r0,r0,r3
000024  4b14              LDR      r3,|L41.120|
000026  6018              STR      r0,[r3,#0]
;;;816                break;
000028  e022              B        |L41.112|
                  |L41.42|
;;;817            case E_SYS_XTL32K:
;;;818                SYSCLK->PWRCON.XTL32K_EN = i32Enable;
00002a  4813              LDR      r0,|L41.120|
00002c  6800              LDR      r0,[r0,#0]
00002e  2302              MOVS     r3,#2
000030  4398              BICS     r0,r0,r3
000032  004b              LSLS     r3,r1,#1
000034  2402              MOVS     r4,#2
000036  4023              ANDS     r3,r3,r4
000038  4318              ORRS     r0,r0,r3
00003a  4b0f              LDR      r3,|L41.120|
00003c  6018              STR      r0,[r3,#0]
;;;819                break;
00003e  e017              B        |L41.112|
                  |L41.64|
;;;820            case E_SYS_OSC22M:
;;;821                SYSCLK->PWRCON.OSC22M_EN = i32Enable;
000040  480d              LDR      r0,|L41.120|
000042  6800              LDR      r0,[r0,#0]
000044  2304              MOVS     r3,#4
000046  4398              BICS     r0,r0,r3
000048  008b              LSLS     r3,r1,#2
00004a  2404              MOVS     r4,#4
00004c  4023              ANDS     r3,r3,r4
00004e  4318              ORRS     r0,r0,r3
000050  4b09              LDR      r3,|L41.120|
000052  6018              STR      r0,[r3,#0]
;;;822                break;
000054  e00c              B        |L41.112|
                  |L41.86|
;;;823            case E_SYS_OSC10K:
;;;824                SYSCLK->PWRCON.OSC10K_EN = i32Enable;
000056  4808              LDR      r0,|L41.120|
000058  6800              LDR      r0,[r0,#0]
00005a  2308              MOVS     r3,#8
00005c  4398              BICS     r0,r0,r3
00005e  00cb              LSLS     r3,r1,#3
000060  2408              MOVS     r4,#8
000062  4023              ANDS     r3,r3,r4
000064  4318              ORRS     r0,r0,r3
000066  4b04              LDR      r3,|L41.120|
000068  6018              STR      r0,[r3,#0]
;;;825                break;
00006a  e001              B        |L41.112|
                  |L41.108|
;;;826            default:
;;;827                return E_DRVSYS_ERR_ARGUMENT;
00006c  4803              LDR      r0,|L41.124|
                  |L41.110|
;;;828        }
;;;829        
;;;830        return E_SUCCESS;
;;;831    }
00006e  bd10              POP      {r4,pc}
                  |L41.112|
000070  bf00              NOP                            ;816
000072  2000              MOVS     r0,#0                 ;830
000074  e7fb              B        |L41.110|
;;;832    
                          ENDP

000076  0000              DCW      0x0000
                  |L41.120|
                          DCD      0x50000200
                  |L41.124|
                          DCD      0xffff9603

                          AREA ||i.DrvSYS_SetPLLContent||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetPLLContent PROC
;;;1057   /*---------------------------------------------------------------------------------------------------------*/
;;;1058   void DrvSYS_SetPLLContent(uint32_t u32PllContent)
000000  4911              LDR      r1,|L42.72|
;;;1059   {
;;;1060       SYSCLK->PLLCON.FB_DV  = (u32PllContent & 0x01FF);
000002  6a09              LDR      r1,[r1,#0x20]
000004  0a49              LSRS     r1,r1,#9
000006  0249              LSLS     r1,r1,#9
000008  05c2              LSLS     r2,r0,#23
00000a  0dd2              LSRS     r2,r2,#23
00000c  4311              ORRS     r1,r1,r2
00000e  4a0e              LDR      r2,|L42.72|
000010  6211              STR      r1,[r2,#0x20]
;;;1061       SYSCLK->PLLCON.IN_DV  = (u32PllContent >> 9) & 0x1F;
000012  4611              MOV      r1,r2
000014  6a09              LDR      r1,[r1,#0x20]
000016  221f              MOVS     r2,#0x1f
000018  0252              LSLS     r2,r2,#9
00001a  4391              BICS     r1,r1,r2
00001c  0a42              LSRS     r2,r0,#9
00001e  0252              LSLS     r2,r2,#9
000020  231f              MOVS     r3,#0x1f
000022  025b              LSLS     r3,r3,#9
000024  401a              ANDS     r2,r2,r3
000026  4311              ORRS     r1,r1,r2
000028  4a07              LDR      r2,|L42.72|
00002a  6211              STR      r1,[r2,#0x20]
;;;1062       SYSCLK->PLLCON.OUT_DV = (u32PllContent >> 14) & 0x03;
00002c  4611              MOV      r1,r2
00002e  6a09              LDR      r1,[r1,#0x20]
000030  2203              MOVS     r2,#3
000032  0392              LSLS     r2,r2,#14
000034  4391              BICS     r1,r1,r2
000036  0b82              LSRS     r2,r0,#14
000038  0392              LSLS     r2,r2,#14
00003a  2303              MOVS     r3,#3
00003c  039b              LSLS     r3,r3,#14
00003e  401a              ANDS     r2,r2,r3
000040  4311              ORRS     r1,r1,r2
000042  4a01              LDR      r2,|L42.72|
000044  6211              STR      r1,[r2,#0x20]
;;;1063   }
000046  4770              BX       lr
;;;1064   
                          ENDP

                  |L42.72|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SetPLLMode||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetPLLMode PROC
;;;950    /*---------------------------------------------------------------------------------------------------------*/
;;;951    void DrvSYS_SetPLLMode(int32_t i32Flag)
000000  490b              LDR      r1,|L43.48|
;;;952    {
;;;953        SYSCLK->PLLCON.OE = i32Flag;
000002  6a09              LDR      r1,[r1,#0x20]
000004  2201              MOVS     r2,#1
000006  0492              LSLS     r2,r2,#18
000008  4391              BICS     r1,r1,r2
00000a  0482              LSLS     r2,r0,#18
00000c  2301              MOVS     r3,#1
00000e  049b              LSLS     r3,r3,#18
000010  401a              ANDS     r2,r2,r3
000012  4311              ORRS     r1,r1,r2
000014  4a06              LDR      r2,|L43.48|
000016  6211              STR      r1,[r2,#0x20]
;;;954        SYSCLK->PLLCON.PD = i32Flag;
000018  4611              MOV      r1,r2
00001a  6a09              LDR      r1,[r1,#0x20]
00001c  01d2              LSLS     r2,r2,#7
00001e  4391              BICS     r1,r1,r2
000020  0402              LSLS     r2,r0,#16
000022  109b              ASRS     r3,r3,#2
000024  401a              ANDS     r2,r2,r3
000026  4311              ORRS     r1,r1,r2
000028  4a01              LDR      r2,|L43.48|
00002a  6211              STR      r1,[r2,#0x20]
;;;955    }
00002c  4770              BX       lr
;;;956    
                          ENDP

00002e  0000              DCW      0x0000
                  |L43.48|
                          DCD      0x50000200

                          AREA ||i.DrvSYS_SetPowerDownWakeUpInt||, CODE, READONLY, ALIGN=2

                  DrvSYS_SetPowerDownWakeUpInt PROC
;;;875    /*---------------------------------------------------------------------------------------------------------*/
;;;876    void DrvSYS_SetPowerDownWakeUpInt(int32_t i32Enable, PWRWU_CALLBACK pdwucallbackFn, int32_t i32enWUDelay)
000000  b570              PUSH     {r4-r6,lr}
;;;877    {
000002  4604              MOV      r4,r0
000004  460d              MOV      r5,r1
000006  4616              MOV      r6,r2
;;;878        SYSCLK->PWRCON.PD_WU_INT_EN = i32Enable;
000008  4816              LDR      r0,|L44.100|
00000a  6800              LDR      r0,[r0,#0]
00000c  2120              MOVS     r1,#0x20
00000e  4388              BICS     r0,r0,r1
000010  0161              LSLS     r1,r4,#5
000012  2220              MOVS     r2,#0x20
000014  4011              ANDS     r1,r1,r2
000016  4308              ORRS     r0,r0,r1
000018  4912              LDR      r1,|L44.100|
00001a  6008              STR      r0,[r1,#0]
;;;879        
;;;880        if (i32Enable)
00001c  2c00              CMP      r4,#0
00001e  d013              BEQ      |L44.72|
;;;881        {
;;;882            SYSCLK->PWRCON.PD_WU_DLY = i32enWUDelay;
000020  4608              MOV      r0,r1
000022  6800              LDR      r0,[r0,#0]
000024  2110              MOVS     r1,#0x10
000026  4388              BICS     r0,r0,r1
000028  0131              LSLS     r1,r6,#4
00002a  2210              MOVS     r2,#0x10
00002c  4011              ANDS     r1,r1,r2
00002e  4308              ORRS     r0,r0,r1
000030  490c              LDR      r1,|L44.100|
000032  6008              STR      r0,[r1,#0]
;;;883            PWRWU_callbackFn = pdwucallbackFn;
000034  480c              LDR      r0,|L44.104|
000036  6005              STR      r5,[r0,#0]  ; PWRWU_callbackFn
;;;884            NVIC_SetPriority(PWRWU_IRQn, (1<<__NVIC_PRIO_BITS) - 2);
000038  2102              MOVS     r1,#2
00003a  201c              MOVS     r0,#0x1c
00003c  f7fffffe          BL       NVIC_SetPriority
;;;885            NVIC_EnableIRQ(PWRWU_IRQn);
000040  201c              MOVS     r0,#0x1c
000042  f7fffffe          BL       NVIC_EnableIRQ
000046  e00b              B        |L44.96|
                  |L44.72|
;;;886        }
;;;887        else
;;;888        { 
;;;889            SYSCLK->PWRCON.PD_WU_DLY = 0;
000048  4806              LDR      r0,|L44.100|
00004a  6800              LDR      r0,[r0,#0]
00004c  2110              MOVS     r1,#0x10
00004e  4388              BICS     r0,r0,r1
000050  4904              LDR      r1,|L44.100|
000052  6008              STR      r0,[r1,#0]
;;;890            PWRWU_callbackFn = NULL;
000054  2000              MOVS     r0,#0
000056  4904              LDR      r1,|L44.104|
000058  6008              STR      r0,[r1,#0]  ; PWRWU_callbackFn
;;;891            NVIC_DisableIRQ(PWRWU_IRQn);
00005a  201c              MOVS     r0,#0x1c
00005c  f7fffffe          BL       NVIC_DisableIRQ
                  |L44.96|
;;;892        }
;;;893    }
000060  bd70              POP      {r4-r6,pc}
;;;894    
                          ENDP

000062  0000              DCW      0x0000
                  |L44.100|
                          DCD      0x50000200
                  |L44.104|
                          DCD      PWRWU_callbackFn

                          AREA ||i.DrvSYS_UnlockProtectedReg||, CODE, READONLY, ALIGN=2

                  DrvSYS_UnlockProtectedReg PROC
;;;66     /*---------------------------------------------------------------------------------------------------------*/
;;;67     int32_t DrvSYS_UnlockProtectedReg(void)
000000  2059              MOVS     r0,#0x59
;;;68     {
;;;69         uint32_t lockbit;
;;;70         
;;;71         SYS->REGWRPROT = 0x59;
000002  4a08              LDR      r2,|L45.36|
000004  6010              STR      r0,[r2,#0]
;;;72         SYS->REGWRPROT = 0x16;
000006  2016              MOVS     r0,#0x16
000008  6010              STR      r0,[r2,#0]
;;;73         SYS->REGWRPROT = 0x88;
00000a  2088              MOVS     r0,#0x88
00000c  6010              STR      r0,[r2,#0]
;;;74     
;;;75         lockbit = SYS->REGWRPROT & 0x01;
00000e  4610              MOV      r0,r2
000010  6800              LDR      r0,[r0,#0]
000012  07c1              LSLS     r1,r0,#31
000014  0fc9              LSRS     r1,r1,#31
;;;76         return (lockbit)? 0 : E_DRVSYS_ERR_UNLOCK_FAIL;
000016  2900              CMP      r1,#0
000018  d001              BEQ      |L45.30|
00001a  2000              MOVS     r0,#0
                  |L45.28|
;;;77     } 
00001c  4770              BX       lr
                  |L45.30|
00001e  4802              LDR      r0,|L45.40|
000020  e7fc              B        |L45.28|
;;;78      
                          ENDP

000022  0000              DCW      0x0000
                  |L45.36|
                          DCD      0x50000100
                  |L45.40|
                          DCD      0xffff9601

                          AREA ||i.NVIC_DisableIRQ||, CODE, READONLY, ALIGN=2

                  NVIC_DisableIRQ PROC
;;;809     */
;;;810    static __INLINE void NVIC_DisableIRQ(IRQn_Type IRQn)
000000  06c2              LSLS     r2,r0,#27
;;;811    {
;;;812      NVIC->ICER[0] = (1 << ((uint32_t)(IRQn) & 0x1F)); /* disable interrupt */
000002  0ed2              LSRS     r2,r2,#27
000004  2101              MOVS     r1,#1
000006  4091              LSLS     r1,r1,r2
000008  4a01              LDR      r2,|L46.16|
00000a  6011              STR      r1,[r2,#0]
;;;813    }
00000c  4770              BX       lr
;;;814    
                          ENDP

00000e  0000              DCW      0x0000
                  |L46.16|
                          DCD      0xe000e180

                          AREA ||i.NVIC_EnableIRQ||, CODE, READONLY, ALIGN=2

                  NVIC_EnableIRQ PROC
;;;796     */
;;;797    static __INLINE void NVIC_EnableIRQ(IRQn_Type IRQn)
000000  06c2              LSLS     r2,r0,#27
;;;798    {
;;;799      NVIC->ISER[0] = (1 << ((uint32_t)(IRQn) & 0x1F)); /* enable interrupt */
000002  0ed2              LSRS     r2,r2,#27
000004  2101              MOVS     r1,#1
000006  4091              LSLS     r1,r1,r2
000008  4a01              LDR      r2,|L47.16|
00000a  6011              STR      r1,[r2,#0]
;;;800    }
00000c  4770              BX       lr
;;;801    
                          ENDP

00000e  0000              DCW      0x0000
                  |L47.16|
                          DCD      0xe000e100

                          AREA ||i.NVIC_SetPriority||, CODE, READONLY, ALIGN=2

                  NVIC_SetPriority PROC
;;;866     */
;;;867    static __INLINE void NVIC_SetPriority(IRQn_Type IRQn, uint32_t priority)
000000  b510              PUSH     {r4,lr}
;;;868    {
;;;869      if(IRQn < 0) {
000002  2800              CMP      r0,#0
000004  da19              BGE      |L48.58|
;;;870        SCB->SHP[_SHP_IDX(IRQn)] = (SCB->SHP[_SHP_IDX(IRQn)] & ~(0xFF << _BIT_SHIFT(IRQn))) | 
000006  4a1a              LDR      r2,|L48.112|
000008  0703              LSLS     r3,r0,#28
00000a  0f1b              LSRS     r3,r3,#28
00000c  3b08              SUBS     r3,r3,#8
00000e  089b              LSRS     r3,r3,#2
000010  009b              LSLS     r3,r3,#2
000012  58d2              LDR      r2,[r2,r3]
000014  0783              LSLS     r3,r0,#30
000016  0edc              LSRS     r4,r3,#27
000018  23ff              MOVS     r3,#0xff
00001a  40a3              LSLS     r3,r3,r4
00001c  439a              BICS     r2,r2,r3
00001e  078b              LSLS     r3,r1,#30
000020  0e1b              LSRS     r3,r3,#24
000022  0784              LSLS     r4,r0,#30
000024  0ee4              LSRS     r4,r4,#27
000026  40a3              LSLS     r3,r3,r4
000028  431a              ORRS     r2,r2,r3
00002a  4b11              LDR      r3,|L48.112|
00002c  0704              LSLS     r4,r0,#28
00002e  0f24              LSRS     r4,r4,#28
000030  3c08              SUBS     r4,r4,#8
000032  08a4              LSRS     r4,r4,#2
000034  00a4              LSLS     r4,r4,#2
000036  511a              STR      r2,[r3,r4]
000038  e018              B        |L48.108|
                  |L48.58|
;;;871            (((priority << (8 - __NVIC_PRIO_BITS)) & 0xFF) << _BIT_SHIFT(IRQn)); }
;;;872      else {
;;;873        NVIC->IPR[_IP_IDX(IRQn)] = (NVIC->IPR[_IP_IDX(IRQn)] & ~(0xFF << _BIT_SHIFT(IRQn))) |
00003a  4a0e              LDR      r2,|L48.116|
00003c  2303              MOVS     r3,#3
00003e  021b              LSLS     r3,r3,#8
000040  18d2              ADDS     r2,r2,r3
000042  0883              LSRS     r3,r0,#2
000044  009b              LSLS     r3,r3,#2
000046  58d2              LDR      r2,[r2,r3]
000048  0783              LSLS     r3,r0,#30
00004a  0edc              LSRS     r4,r3,#27
00004c  23ff              MOVS     r3,#0xff
00004e  40a3              LSLS     r3,r3,r4
000050  439a              BICS     r2,r2,r3
000052  078b              LSLS     r3,r1,#30
000054  0e1b              LSRS     r3,r3,#24
000056  0784              LSLS     r4,r0,#30
000058  0ee4              LSRS     r4,r4,#27
00005a  40a3              LSLS     r3,r3,r4
00005c  431a              ORRS     r2,r2,r3
00005e  4b05              LDR      r3,|L48.116|
000060  2403              MOVS     r4,#3
000062  0224              LSLS     r4,r4,#8
000064  191b              ADDS     r3,r3,r4
000066  0884              LSRS     r4,r0,#2
000068  00a4              LSLS     r4,r4,#2
00006a  511a              STR      r2,[r3,r4]
                  |L48.108|
;;;874            (((priority << (8 - __NVIC_PRIO_BITS)) & 0xFF) << _BIT_SHIFT(IRQn)); }
;;;875    }
00006c  bd10              POP      {r4,pc}
;;;876    
                          ENDP

00006e  0000              DCW      0x0000
                  |L48.112|
                          DCD      0xe000ed1c
                  |L48.116|
                          DCD      0xe000e100

                          AREA ||i.PWRWU_IRQHandler||, CODE, READONLY, ALIGN=2

                  PWRWU_IRQHandler PROC
;;;843    /*---------------------------------------------------------------------------------------------------------*/
;;;844    void PWRWU_IRQHandler(void)
000000  b510              PUSH     {r4,lr}
;;;845    {
;;;846        SYSCLK->PWRCON.PD_WU_STS = 1;
000002  4807              LDR      r0,|L49.32|
000004  6800              LDR      r0,[r0,#0]
000006  2140              MOVS     r1,#0x40
000008  4388              BICS     r0,r0,r1
00000a  3040              ADDS     r0,r0,#0x40
00000c  4904              LDR      r1,|L49.32|
00000e  6008              STR      r0,[r1,#0]
;;;847        if (PWRWU_callbackFn != NULL)
000010  4804              LDR      r0,|L49.36|
000012  6800              LDR      r0,[r0,#0]  ; PWRWU_callbackFn
000014  2800              CMP      r0,#0
000016  d002              BEQ      |L49.30|
;;;848            PWRWU_callbackFn(); 
000018  4802              LDR      r0,|L49.36|
00001a  6800              LDR      r0,[r0,#0]  ; PWRWU_callbackFn
00001c  4780              BLX      r0
                  |L49.30|
;;;849    }
00001e  bd10              POP      {r4,pc}
;;;850    
                          ENDP

                  |L49.32|
                          DCD      0x50000200
                  |L49.36|
                          DCD      PWRWU_callbackFn

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

                          DCD      0x00000001
                          DCD      0x00000002
                          DCD      0x00000002
                          DCD      0x00000004

                          AREA ||.data||, DATA, ALIGN=2

                  BOD_callbackFn
                          DCD      0x00000000
                  PWRWU_callbackFn
                          DCD      0x00000000

                          AREA ||i.__ARM_common_switch8||, COMGROUP=__ARM_common_switch8, CODE, READONLY, ALIGN=1

                  __ARM_common_switch8 PROC
000000  b430              PUSH     {r4,r5}
000002  4674              MOV      r4,lr
000004  1e64              SUBS     r4,r4,#1
000006  7825              LDRB     r5,[r4,#0]
000008  1c64              ADDS     r4,r4,#1
00000a  42ab              CMP      r3,r5
00000c  d200              BCS      |L301.16|
00000e  461d              MOV      r5,r3
                  |L301.16|
000010  5d63              LDRB     r3,[r4,r5]
000012  005b              LSLS     r3,r3,#1
000014  18e3              ADDS     r3,r4,r3
000016  bc30              POP      {r4,r5}
000018  4718              BX       r3
                          ENDP

